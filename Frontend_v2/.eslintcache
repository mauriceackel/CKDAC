[{"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/index.tsx":"1","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/serviceWorker.ts":"2","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/App.tsx":"3","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/config.ts":"4","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/pages/Home.tsx":"5","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/pages/SignIn.tsx":"6","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/ValidatedInput.tsx":"7","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/services/auth/authservice.ts":"8","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/hooks/useQuery.ts":"9","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/pages/SignUp.tsx":"10","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/services/auth/authcontext.tsx":"11","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/AccountPopover.tsx":"12","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/services/userservice.ts":"13","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/Icons/UserIcon.tsx":"14","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/Icons/ChevronRightIcon.tsx":"15","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/Icons/LogoutIcon.tsx":"16","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/Icons/SettingsIcon.tsx":"17","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/pages/Account.tsx":"18","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/pages/InterfaceEditor.tsx":"19","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/services/apiservice.ts":"20","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/models/ApiModel.ts":"21","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/JsonEditor.tsx":"22","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/apiSelection.ts":"23","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/swaggerParser.ts":"24","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/Icons/ClearIcon.tsx":"25","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/Icons/AddIcon.tsx":"26","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/services/mappingservice.ts":"27","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/toTree.ts":"28","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/models/MappingModel.ts":"29","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/contexts/MappingContext.tsx":"30","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/MappingContainer.tsx":"31","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/MappingArea.tsx":"32","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/SchemaTree.tsx":"33","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/MappingTransformationEditor.tsx":"34","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/escapeJsonata.ts":"35","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/Icons/CheckIcon.tsx":"36","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/MappingTest.tsx":"37","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/stringIfiedToJsonata.ts":"38","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/Spinner.tsx":"39","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/services/adapterservice.ts":"40","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/download.ts":"41","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/InfoModal.tsx":"42","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/pages/MappingEditor.tsx":"43","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/get-inputs/get-inputs.js":"44","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/get-inputs/utils.js":"45","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/get-inputs/datetime.js":"46","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/get-inputs/parser.js":"47","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/get-inputs/functions.js":"48","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/get-inputs/signature.js":"49","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/PrivateRoute.tsx":"50","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/pages/OpenApiMappingCreator.tsx":"51","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/pages/AsyncApiMappingCreator.tsx":"52","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/asyncApiParser.ts":"53","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/ActionBar.tsx":"54","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/schemaHelpers.ts":"55","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/hooks/usePrompt.tsx":"56","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/mappingHelpers.ts":"57"},{"size":430,"mtime":1617967173901,"results":"58","hashOfConfig":"59"},{"size":5308,"mtime":1617967173910,"results":"60","hashOfConfig":"59"},{"size":4088,"mtime":1617967173887,"results":"61","hashOfConfig":"59"},{"size":330,"mtime":1617967173900,"results":"62","hashOfConfig":"59"},{"size":1580,"mtime":1617967173905,"results":"63","hashOfConfig":"59"},{"size":2809,"mtime":1617967173908,"results":"64","hashOfConfig":"59"},{"size":740,"mtime":1617967173900,"results":"65","hashOfConfig":"59"},{"size":2440,"mtime":1617967173912,"results":"66","hashOfConfig":"59"},{"size":675,"mtime":1617967173928,"results":"67","hashOfConfig":"59"},{"size":3250,"mtime":1617967173908,"results":"68","hashOfConfig":"59"},{"size":5218,"mtime":1617967173912,"results":"69","hashOfConfig":"59"},{"size":2847,"mtime":1617967173887,"results":"70","hashOfConfig":"59"},{"size":571,"mtime":1617967173914,"results":"71","hashOfConfig":"59"},{"size":515,"mtime":1617967173893,"results":"72","hashOfConfig":"59"},{"size":482,"mtime":1617967173890,"results":"73","hashOfConfig":"59"},{"size":541,"mtime":1617967173892,"results":"74","hashOfConfig":"59"},{"size":1090,"mtime":1617967173892,"results":"75","hashOfConfig":"59"},{"size":3842,"mtime":1617967173904,"results":"76","hashOfConfig":"59"},{"size":5925,"mtime":1617967173906,"results":"77","hashOfConfig":"59"},{"size":1332,"mtime":1617967173911,"results":"78","hashOfConfig":"59"},{"size":599,"mtime":1617967173902,"results":"79","hashOfConfig":"59"},{"size":862,"mtime":1617967173894,"results":"80","hashOfConfig":"59"},{"size":724,"mtime":1617967173917,"results":"81","hashOfConfig":"59"},{"size":9619,"mtime":1617967173926,"results":"82","hashOfConfig":"59"},{"size":685,"mtime":1617967173891,"results":"83","hashOfConfig":"59"},{"size":472,"mtime":1617967173889,"results":"84","hashOfConfig":"59"},{"size":5928,"mtime":1617967173913,"results":"85","hashOfConfig":"59"},{"size":594,"mtime":1617967173927,"results":"86","hashOfConfig":"59"},{"size":997,"mtime":1617967173903,"results":"87","hashOfConfig":"59"},{"size":5031,"mtime":1617967173901,"results":"88","hashOfConfig":"59"},{"size":9245,"mtime":1617967173895,"results":"89","hashOfConfig":"59"},{"size":6477,"mtime":1617967173894,"results":"90","hashOfConfig":"59"},{"size":4464,"mtime":1617967173899,"results":"91","hashOfConfig":"59"},{"size":4099,"mtime":1617967173896,"results":"92","hashOfConfig":"59"},{"size":393,"mtime":1617967173918,"results":"93","hashOfConfig":"59"},{"size":679,"mtime":1617967173890,"results":"94","hashOfConfig":"59"},{"size":5127,"mtime":1617967173895,"results":"95","hashOfConfig":"59"},{"size":314,"mtime":1617967173926,"results":"96","hashOfConfig":"59"},{"size":661,"mtime":1617967173899,"results":"97","hashOfConfig":"59"},{"size":575,"mtime":1617967173911,"results":"98","hashOfConfig":"59"},{"size":283,"mtime":1617967173918,"results":"99","hashOfConfig":"59"},{"size":1232,"mtime":1617967173893,"results":"100","hashOfConfig":"59"},{"size":15100,"mtime":1617967173907,"results":"101","hashOfConfig":"59"},{"size":76959,"mtime":1617967173922,"results":"102","hashOfConfig":"59"},{"size":6077,"mtime":1617967173923,"results":"103","hashOfConfig":"59"},{"size":56307,"mtime":1617967173920,"results":"104","hashOfConfig":"59"},{"size":54880,"mtime":1617967173922,"results":"105","hashOfConfig":"59"},{"size":68905,"mtime":1617967173920,"results":"106","hashOfConfig":"59"},{"size":13930,"mtime":1617967173923,"results":"107","hashOfConfig":"59"},{"size":1265,"mtime":1617967173897,"results":"108","hashOfConfig":"59"},{"size":26537,"mtime":1617967173907,"results":"109","hashOfConfig":"59"},{"size":24095,"mtime":1617967173905,"results":"110","hashOfConfig":"59"},{"size":4456,"mtime":1617967173917,"results":"111","hashOfConfig":"59"},{"size":2104,"mtime":1617967173888,"results":"112","hashOfConfig":"59"},{"size":818,"mtime":1617967173925,"results":"113","hashOfConfig":"59"},{"size":1593,"mtime":1617967173927,"results":"114","hashOfConfig":"59"},{"size":1906,"mtime":1617967173924,"results":"115","hashOfConfig":"59"},{"filePath":"116","messages":"117","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},"fbnpge",{"filePath":"119","messages":"120","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"121","messages":"122","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"123","messages":"124","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"125","messages":"126","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"127","messages":"128","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"129","usedDeprecatedRules":"118"},{"filePath":"130","messages":"131","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"132","usedDeprecatedRules":"118"},{"filePath":"133","messages":"134","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"135","usedDeprecatedRules":"118"},{"filePath":"136","messages":"137","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"138","messages":"139","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"140","usedDeprecatedRules":"118"},{"filePath":"141","messages":"142","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"143","usedDeprecatedRules":"118"},{"filePath":"144","messages":"145","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"146","usedDeprecatedRules":"118"},{"filePath":"147","messages":"148","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"149","messages":"150","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"151","messages":"152","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"153","messages":"154","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"155","messages":"156","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"157","messages":"158","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"159","usedDeprecatedRules":"118"},{"filePath":"160","messages":"161","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"162","usedDeprecatedRules":"118"},{"filePath":"163","messages":"164","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"165","messages":"166","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"167","messages":"168","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"169","usedDeprecatedRules":"118"},{"filePath":"170","messages":"171","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"172","usedDeprecatedRules":"118"},{"filePath":"173","messages":"174","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"175","usedDeprecatedRules":"118"},{"filePath":"176","messages":"177","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"178","messages":"179","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"180","messages":"181","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"182","messages":"183","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"184","usedDeprecatedRules":"185"},{"filePath":"186","messages":"187","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"188","messages":"189","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"190","messages":"191","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"192","messages":"193","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"194","messages":"195","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"196","messages":"197","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"198","messages":"199","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"200","messages":"201","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"202","messages":"203","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"204","usedDeprecatedRules":"118"},{"filePath":"205","messages":"206","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"207","messages":"208","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"209","messages":"210","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"211","messages":"212","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"213","messages":"214","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"215","messages":"216","errorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"217","usedDeprecatedRules":"118"},{"filePath":"218","messages":"219","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"220"},{"filePath":"221","messages":"222","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"220"},{"filePath":"223","messages":"224","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"220"},{"filePath":"225","messages":"226","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"220"},{"filePath":"227","messages":"228","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"220"},{"filePath":"229","messages":"230","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"220"},{"filePath":"231","messages":"232","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"233","messages":"234","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"235","usedDeprecatedRules":"118"},{"filePath":"236","messages":"237","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"238","usedDeprecatedRules":"118"},{"filePath":"239","messages":"240","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"241","usedDeprecatedRules":"118"},{"filePath":"242","messages":"243","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"244","messages":"245","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"246","usedDeprecatedRules":"118"},{"filePath":"247","messages":"248","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"249","usedDeprecatedRules":"118"},{"filePath":"250","messages":"251","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/index.tsx",[],["252","253","254","255","256","257"],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/serviceWorker.ts",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/App.tsx",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/config.ts",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/pages/Home.tsx",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/pages/SignIn.tsx",["258"],"import ValidatedInput from 'components/ValidatedInput';\nimport React, { ReactElement, useContext } from 'react';\nimport { useForm } from 'react-hook-form';\nimport * as yup from 'yup';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { signIn } from 'services/auth/authservice';\nimport useQuery from 'utils/hooks/useQuery';\nimport { useHistory, useLocation } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport { getUser } from 'services/userservice';\nimport { AuthContext } from 'services/auth/authcontext';\n\n// #region Form Validation\nconst SignInSchema = yup.object({\n  email: yup\n    .string()\n    .required('Email is required')\n    .email('Email has a wrong format'),\n  password: yup.string().required('Password is required'),\n});\n\ntype SignInData = yup.InferType<typeof SignInSchema>;\n// #endregion\n\nfunction SignIn(): ReactElement {\n  const { returnUrl } = useQuery<{ returnUrl: string }>();\n  const { authStateChanged } = useContext(AuthContext);\n  const history = useHistory();\n  const location = useLocation();\n\n  const { register, handleSubmit, errors, setError } = useForm({\n    resolver: yupResolver(SignInSchema),\n  });\n\n  async function handleSignIn(signInData: SignInData) {\n    try {\n      const userId = await signIn(signInData.email, signInData.password);\n      const user = await getUser(userId);\n      authStateChanged(user);\n\n      if (returnUrl) {\n        history.push(returnUrl);\n      } else {\n        history.push('/');\n      }\n    } catch (err) {\n      console.log(err);\n      setError('signin', {\n        type: 'manual',\n        message: 'Wrong email address or password',\n      });\n    }\n  }\n\n  return (\n    <div className=\"content-page flex flex-col items-center\">\n      <form\n        noValidate\n        onSubmit={handleSubmit(handleSignIn)}\n        className=\"mt-4 flex flex-col shadow-lg p-8 rounded small-form\"\n      >\n        <p className=\"font-bold text-sm\">Email</p>\n        <ValidatedInput name=\"email\" register={register} errors={errors}>\n          <input type=\"email\" className=\"input\" />\n        </ValidatedInput>\n        <p className=\"mt-2 font-bold text-sm\">Password</p>\n        <ValidatedInput name=\"password\" register={register} errors={errors}>\n          <input type=\"password\" className=\"input\" />\n        </ValidatedInput>\n\n        {errors.signin && (\n          <p className=\"text-sm text-red-600\">{errors.signin.message}</p>\n        )}\n\n        <button\n          type=\"submit\"\n          className=\"mt-4 button shadow-lg bg-red-900 text-white\"\n        >\n          Sign In\n        </button>\n\n        <Link\n          to={`/signup/${location.search ?? ''}`}\n          className=\"mt-4 text-center button shadow-lg bg-red-900 text-white\"\n        >\n          Sign Up\n        </Link>\n      </form>\n    </div>\n  );\n}\n\nexport default SignIn;\n","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/ValidatedInput.tsx",["259"],"/* eslint-disable react/require-default-props */\nimport React, { ReactElement } from 'react';\nimport { DeepMap, FieldError } from 'react-hook-form';\n\ntype ValidatedInputProps<T = Record<string, unknown>> = {\n  name: keyof T & string;\n  register: any;\n  errors?: DeepMap<T, FieldError> &\n    DeepMap<Record<string, unknown>, FieldError>;\n  children: ReactElement;\n};\n\nfunction ValidatedInput<T extends Record<string, unknown>>(\n  props: ValidatedInputProps<T>,\n): ReactElement {\n  const { name, register, errors, children: child } = props;\n\n  return (\n    <>\n      {React.cloneElement(child, { name, ref: register })}\n      <p className=\"h-4 text-sm text-red-600\">{errors?.[name]?.message}</p>\n    </>\n  );\n}\n\nexport default ValidatedInput;\n","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/services/auth/authservice.ts",["260","261","262","263","264"],"import axios from 'axios';\nimport { AUTH_BASE_URL } from 'config';\nimport ApiResponse from 'models/ApiResponse';\nimport { UserModel } from 'models/UserModel';\nimport jwtDecode from 'jwt-decode';\nimport { getUser } from 'services/userservice';\n\ntype TokenResponse = ApiResponse<{\n  accessToken: string;\n  refreshToken: string;\n}>;\n\nexport async function signIn(email: string, password: string): Promise<string> {\n  try {\n    const authResult = await axios.post<TokenResponse>(\n      `${AUTH_BASE_URL}/auth`,\n      {\n        email,\n        password,\n      },\n    );\n\n    const { accessToken, refreshToken } = authResult.data.result;\n    localStorage.setItem('accessToken', accessToken);\n    localStorage.setItem('refreshToken', refreshToken);\n\n    const { userId } = jwtDecode(accessToken) as { userId: string };\n    return userId;\n  } catch (err) {\n    console.log(err);\n    throw new Error('Authentication error');\n  }\n}\n\nexport async function signUp(userData: UserModel): Promise<void> {\n  try {\n    await axios.post<ApiResponse<void>>(`${AUTH_BASE_URL}/register`, userData);\n  } catch (err) {\n    console.log(err);\n    throw new Error('Signup error');\n  }\n}\n\nexport async function signOut(): Promise<void> {\n  try {\n    await axios.post<ApiResponse<void>>(`${AUTH_BASE_URL}/logout`);\n  } catch (err) {\n    console.log(err);\n    throw new Error('Logout error');\n  } finally {\n    localStorage.removeItem('accessToken');\n    localStorage.removeItem('refreshToken');\n  }\n}\n\nexport function getSignedInUserId(): string | undefined {\n  const accessToken = localStorage.getItem('accessToken');\n\n  if (!accessToken) {\n    return undefined;\n  }\n\n  const { userId } = jwtDecode(accessToken) as { userId: string };\n\n  return userId;\n}\n\nexport async function refreshAccessToken(): Promise<{\n  accessToken: string;\n  refreshToken: string;\n}> {\n  const currentRefreshToken = localStorage.getItem('refreshToken');\n\n  try {\n    const refreshResult = await axios.post<TokenResponse>(\n      `${AUTH_BASE_URL}/renew`,\n      undefined,\n      {\n        headers: {\n          Authorization: `Bearer ${currentRefreshToken}`,\n        },\n      },\n    );\n\n    const { accessToken, refreshToken } = refreshResult.data.result;\n    localStorage.setItem('accessToken', accessToken);\n    localStorage.setItem('refreshToken', refreshToken);\n\n    return refreshResult.data.result;\n  } catch (err) {\n    console.log(err);\n    throw new Error('Token refresh error');\n  }\n}\n","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/hooks/useQuery.ts",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/pages/SignUp.tsx",["265"],"import ValidatedInput from 'components/ValidatedInput';\nimport React, { ReactElement } from 'react';\nimport { useForm } from 'react-hook-form';\nimport * as yup from 'yup';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { signUp } from 'services/auth/authservice';\nimport { useHistory, useLocation } from 'react-router';\n\n// #region Form Validation\nconst SignUpSchema = yup.object({\n  email: yup\n    .string()\n    .required('Email is required')\n    .email('Email has a wrong format'),\n  firstname: yup.string().required('First name is required'),\n  lastname: yup.string().required('Last name is required'),\n  password: yup\n    .string()\n    .min(8, 'Password is too short')\n    .required('Password is required'),\n  passwordConfirm: yup.string().test({\n    name: 'mismatch',\n    test: (value, context) => context.parent.password === value,\n    message: \"Passwords don't match\",\n  }),\n});\ntype SignUpData = yup.InferType<typeof SignUpSchema>;\n// #endregion\n\nfunction SignUp(): ReactElement {\n  const history = useHistory();\n  const location = useLocation();\n\n  const { register, handleSubmit, errors, setError } = useForm({\n    resolver: yupResolver(SignUpSchema),\n  });\n\n  async function handleSignUp(signUpData: SignUpData) {\n    try {\n      const { passwordConfirm, ...userData } = signUpData;\n\n      await signUp(userData);\n\n      history.push(`/signin/${location.search ?? ''}`);\n    } catch (err) {\n      console.log(err);\n      setError('signup', {\n        type: 'manual',\n        message: 'An error occurred. Please try again later.',\n      });\n    }\n  }\n\n  return (\n    <div className=\"content-page flex flex-col items-center\">\n      <form\n        noValidate\n        onSubmit={handleSubmit(handleSignUp)}\n        className=\"mt-4 flex flex-col shadow-lg p-8 rounded small-form\"\n      >\n        <p className=\"font-bold text-sm\">First Name</p>\n        <ValidatedInput name=\"firstname\" register={register} errors={errors}>\n          <input type=\"text\" className=\"input\" />\n        </ValidatedInput>\n        <p className=\"mt-2 font-bold text-sm\">Last Name</p>\n        <ValidatedInput name=\"lastname\" register={register} errors={errors}>\n          <input type=\"test\" className=\"input\" />\n        </ValidatedInput>\n        <p className=\"mt-2 font-bold text-sm\">Email</p>\n        <ValidatedInput name=\"email\" register={register} errors={errors}>\n          <input type=\"email\" className=\"input\" />\n        </ValidatedInput>\n        <p className=\"mt-2 font-bold text-sm\">Password</p>\n        <ValidatedInput name=\"password\" register={register} errors={errors}>\n          <input type=\"password\" className=\"input\" />\n        </ValidatedInput>\n        <p className=\"mt-2 font-bold text-sm\">Password Confirmation</p>\n        <ValidatedInput\n          name=\"passwordConfirm\"\n          register={register}\n          errors={errors}\n        >\n          <input type=\"password\" className=\"input\" />\n        </ValidatedInput>\n\n        {errors.signup && (\n          <p className=\"text-sm text-red-600\">{errors.signup.message}</p>\n        )}\n\n        <button\n          type=\"submit\"\n          className=\"mt-4 button shadow-lg bg-red-900 text-white\"\n        >\n          Sign Up\n        </button>\n      </form>\n    </div>\n  );\n}\n\nexport default SignUp;\n","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/services/auth/authcontext.tsx",["266"],"import React, {\n  PropsWithChildren,\n  ReactElement,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport { UserModel } from 'models/UserModel';\nimport { getUser } from 'services/userservice';\nimport axios from 'axios';\nimport { AUTH_BASE_URL } from 'config';\nimport { getSignedInUserId, refreshAccessToken } from './authservice';\n\ntype AuthSate = { user?: UserModel; loading: boolean };\nconst initialState: AuthSate = {\n  user: undefined,\n  loading: true,\n};\n\nconst AuthContext = React.createContext<{\n  authState: AuthSate;\n  authStateChanged: (user: UserModel | undefined) => void;\n}>({\n  authState: initialState,\n  authStateChanged: () => {},\n});\n\nfunction AuthProvider({ children }: PropsWithChildren<unknown>): ReactElement {\n  const [authState, setAuthState] = useState(initialState);\n\n  const authStateChanged = (user: UserModel | undefined) => {\n    setAuthState({ user, loading: false });\n  };\n\n  // #region Request interceptors\n  const refreshInProgress = useRef<boolean>(false);\n  const requestQueue = useRef<\n    { resolve: (accessToken: string) => void; reject: (reason?: any) => void }[]\n  >([]);\n\n  const addAccessTokenInterceptor = useCallback(\n    () =>\n      axios.interceptors.request.use((request) => {\n        if (request.headers.Authorization) {\n          return request;\n        }\n\n        // If authorization header is not set, add access token\n        const accessToken = localStorage.getItem('accessToken');\n        request.headers.Authorization = `Bearer ${accessToken}`;\n\n        return request;\n      }),\n    [],\n  );\n\n  const addRefreshInterceptor = useCallback(\n    () =>\n      axios.interceptors.response.use(undefined, async (error) => {\n        const originalRequest = error.config;\n\n        if (\n          error.response?.status === 401 &&\n          !originalRequest.isRetry &&\n          originalRequest.url !== `${AUTH_BASE_URL}/renew`\n        ) {\n          // We received an error but we are already refreshing the token initiated by an earlier request\n          if (refreshInProgress.current) {\n            // Queue the request and wait for the first refresh request to finish\n\n            const awaiter = new Promise<string>((resolve, reject) =>\n              // We add the promise methods to the queue so we can resolve this promise later\n              requestQueue.current.push({ resolve, reject }),\n            );\n\n            return awaiter.then((accessToken) =>\n              axios({\n                ...originalRequest,\n                isRetry: true,\n                headers: {\n                  ...originalRequest.headers,\n                  Authorization: `Bearer ${accessToken}`,\n                },\n              }),\n            );\n          }\n\n          // This is the first 401 we get so we try to refresh the token\n          try {\n            refreshInProgress.current = true;\n\n            const { accessToken } = await refreshAccessToken();\n\n            // Refreshing the token succeeded, now process all potentially enqueued requests\n            requestQueue.current.forEach((request) =>\n              request.resolve(accessToken),\n            );\n\n            // Set flag in order to not end up in endless loop\n            originalRequest.isRetry = true;\n            // Update access token so that next request will succeed\n            originalRequest.headers.Authorization = `Bearer ${accessToken}`;\n\n            // Retry request\n            return axios(originalRequest);\n          } catch (err) {\n            // We had an error refreshing the token\n\n            // Remove the user as he/she is not signed in anymore\n            authStateChanged(undefined);\n\n            // Also reject all waiting requests\n            requestQueue.current.forEach((request) => request.reject(err));\n\n            return Promise.reject(err);\n          } finally {\n            refreshInProgress.current = false;\n            requestQueue.current = [];\n          }\n        }\n\n        // If the error was not a 401 or we already retried, return the error\n        return Promise.reject(error);\n      }),\n    [],\n  );\n\n  useEffect(() => {\n    const accessTokenInterceptorId = addAccessTokenInterceptor();\n    const refreshInterceptorId = addRefreshInterceptor();\n\n    return () => {\n      axios.interceptors.request.eject(accessTokenInterceptorId);\n      axios.interceptors.request.eject(refreshInterceptorId);\n    };\n  }, [addAccessTokenInterceptor, addRefreshInterceptor]);\n  // #endregion\n\n  // #region Load user\n  useEffect(() => {\n    async function loadUser() {\n      const userId = getSignedInUserId();\n\n      try {\n        if (!userId) {\n          throw new Error('No user id yet');\n        }\n\n        const user = await getUser(userId);\n        setAuthState((current) => ({\n          ...current,\n          user,\n          loading: false,\n        }));\n      } catch (err) {\n        setAuthState((current) => ({\n          ...current,\n          user: undefined,\n          loading: false,\n        }));\n      }\n    }\n\n    loadUser();\n  }, []);\n  // #endregion\n\n  return (\n    <AuthContext.Provider\n      value={{\n        authState,\n        authStateChanged,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport { AuthProvider, AuthContext };\n","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/AccountPopover.tsx",["267","268","269"],"/* eslint-disable @typescript-eslint/no-use-before-define */\nimport { UserModel } from 'models/UserModel';\nimport React, { ReactElement, useContext, useEffect, useState } from 'react';\nimport { Redirect, useHistory, useLocation } from 'react-router';\nimport { Popover } from 'react-tiny-popover';\nimport { AuthContext } from 'services/auth/authcontext';\nimport { signOut } from 'services/auth/authservice';\nimport LogoutIcon from './Icons/LogoutIcon';\nimport SettingsIcon from './Icons/SettingsIcon';\n\ntype AccountPopoverProps = {\n  children: ReactElement;\n};\nfunction AccountPopover(props: AccountPopoverProps): ReactElement {\n  const { children: child } = props;\n\n  const {\n    authState: { user },\n  } = useContext(AuthContext);\n  const history = useHistory();\n  const { pathname } = useLocation();\n\n  const [isOpen, setIsOpen] = useState<boolean>(false);\n\n  function handleClick() {\n    if (!user && !pathname.startsWith('/signin/')) {\n      history.push(`/signin/?returnUrl=${encodeURIComponent(pathname)}`);\n      return;\n    }\n\n    setIsOpen((curr) => !curr);\n  }\n\n  useEffect(() => {\n    if (isOpen && !user) {\n      setIsOpen(false);\n    }\n  }, [user, isOpen]);\n\n  return (\n    <Popover\n      isOpen={isOpen}\n      onClickOutside={() => setIsOpen(false)}\n      align=\"end\"\n      containerClassName=\"z-50\"\n      positions={['bottom']}\n      content={<AccountPopoverContent />}\n    >\n      {React.cloneElement(child, { onClick: handleClick })}\n    </Popover>\n  );\n}\n\n// #region Account Popover content\nfunction AccountPopoverContent(): ReactElement {\n  const history = useHistory();\n  const {\n    authState: { user },\n    authStateChanged,\n  } = useContext(AuthContext);\n\n  async function handleSignOut() {\n    try {\n      await signOut();\n      authStateChanged(undefined);\n\n      history.push('/');\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  return (\n    <div className=\"relative flex flex-col rounded bg-green-800 p-8 shadow-2xl text-white\">\n      <div className=\"absolute rounded-sm right-2 -top-2 bg-green-800 w-6 h-6 transform rotate-45\" />\n      <h1 className=\"text-2xl\">\n        {user?.firstname} {user?.lastname}\n      </h1>\n      <h2 className=\"text-lg\">{user?.email}</h2>\n      <div className=\"flex mt-2\">\n        <button\n          type=\"button\"\n          className=\"flex items-center button shadow-lg bg-white text-green-800 mr-1\"\n          onClick={() => history.push('/account/')}\n        >\n          <SettingsIcon className=\"w-5 h-5 mr-2\" />\n          Settings\n        </button>\n        <button\n          type=\"button\"\n          className=\"flex items-center button shadow-lg bg-white text-green-800 ml-1\"\n          onClick={handleSignOut}\n        >\n          <LogoutIcon className=\"w-5 h-5 mr-2\" />\n          Logout\n        </button>\n      </div>\n    </div>\n  );\n}\n// #endregion\n\nexport default AccountPopover;\n","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/services/userservice.ts",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/Icons/UserIcon.tsx",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/Icons/ChevronRightIcon.tsx",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/Icons/LogoutIcon.tsx",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/Icons/SettingsIcon.tsx",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/pages/Account.tsx",["270","271"],"import ValidatedInput from 'components/ValidatedInput';\nimport React, { ReactElement, useContext } from 'react';\nimport { useForm } from 'react-hook-form';\nimport * as yup from 'yup';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { getUser, updateUser } from 'services/userservice';\nimport { AuthContext } from 'services/auth/authcontext';\n\n// #region Form Validation\nconst UserSchema = yup.object({\n  email: yup\n    .string()\n    .required('Email is required')\n    .email('Email has a wrong format'),\n  password: yup.string().test({\n    name: 'null_or_min',\n    test: (val) => !val || val.length >= 8,\n  }),\n  passwordConfirm: yup.string().test({\n    name: 'mismatch',\n    test: (value, context) =>\n      !context.parent.password || context.parent.password === value,\n    message: \"Passwords don't match\",\n  }),\n  firstname: yup.string().required('First name is required'),\n  lastname: yup.string().required('Last name is required'),\n});\n\ntype UserData = yup.InferType<typeof UserSchema>;\n// #endregion\n\nfunction SignIn(): ReactElement {\n  const {\n    authState: { user },\n    authStateChanged,\n  } = useContext(AuthContext);\n\n  const { register, handleSubmit, errors, setError } = useForm({\n    resolver: yupResolver(UserSchema),\n  });\n\n  async function handleUpdate(userData: UserData) {\n    if (!user) {\n      return;\n    }\n\n    try {\n      await updateUser({\n        id: user.id,\n        email: userData.email,\n        firstname: userData.firstname,\n        lastname: userData.lastname,\n        ...(userData.password ? { password: userData.password } : null),\n      });\n      const updatedUser = await getUser(user.id!);\n      authStateChanged(updatedUser);\n\n      setError('success', {\n        type: 'manual',\n        message: 'User was updated successfully.',\n      });\n    } catch (err) {\n      console.log(err);\n      setError('error', {\n        type: 'manual',\n        message: 'An error occurred. Please try again later.',\n      });\n    }\n  }\n\n  return (\n    <div className=\"content-page flex flex-col items-center\">\n      <form\n        noValidate\n        onSubmit={handleSubmit(handleUpdate)}\n        className=\"mt-4 flex flex-col shadow-lg p-8 rounded\"\n      >\n        <p className=\"font-bold text-sm\">First Name</p>\n        <ValidatedInput name=\"firstname\" register={register} errors={errors}>\n          <input type=\"text\" className=\"input\" defaultValue={user?.firstname} />\n        </ValidatedInput>\n        <p className=\"mt-2 font-bold text-sm\">Last Name</p>\n        <ValidatedInput name=\"lastname\" register={register} errors={errors}>\n          <input type=\"test\" className=\"input\" defaultValue={user?.lastname} />\n        </ValidatedInput>\n        <p className=\"mt-2 font-bold text-sm\">Email</p>\n        <ValidatedInput name=\"email\" register={register} errors={errors}>\n          <input type=\"email\" className=\"input\" defaultValue={user?.email} />\n        </ValidatedInput>\n        <p className=\"mt-2 font-bold text-sm\">Password</p>\n        <ValidatedInput name=\"password\" register={register} errors={errors}>\n          <input type=\"password\" className=\"input\" />\n        </ValidatedInput>\n        <p className=\"mt-2 font-bold text-sm\">Password Confirmation</p>\n        <ValidatedInput\n          name=\"passwordConfirm\"\n          register={register}\n          errors={errors}\n        >\n          <input type=\"password\" className=\"input\" />\n        </ValidatedInput>\n\n        {errors.error && (\n          <p className=\"text-sm text-red-600\">{errors.error.message}</p>\n        )}\n\n        {errors.success && (\n          <p className=\"text-sm text-green-600\">{errors.success.message}</p>\n        )}\n\n        <button\n          type=\"submit\"\n          className=\"mt-4 button shadow-lg bg-red-900 text-white\"\n        >\n          Update Data\n        </button>\n      </form>\n    </div>\n  );\n}\n\nexport default SignIn;\n","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/pages/InterfaceEditor.tsx",["272","273","274"],"/* eslint-disable @typescript-eslint/no-use-before-define */\nimport React, {\n  ReactElement,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from 'react';\nimport { Controller, useForm } from 'react-hook-form';\nimport * as yup from 'yup';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport Select from 'react-select';\nimport { ApiType } from 'models/ApiModel';\nimport { getApi, getApis, upsertApi } from 'services/apiservice';\nimport { useParams } from 'react-router';\nimport ValidatedInput from 'components/ValidatedInput';\nimport { AuthContext } from 'services/auth/authcontext';\nimport JsonEditor from 'components/JsonEditor';\nimport { ApiOption, optionFilter } from 'utils/helpers/apiSelection';\n\n// #region Form Validation\nconst ApiSchema = yup.object({\n  name: yup.string().required('Name is required'),\n  metadata: yup.object({\n    company: yup.string(),\n    keywords: yup.string(),\n  }),\n  apiSpec: yup.mixed().required(),\n});\ntype ApiData = yup.InferType<typeof ApiSchema>;\n// #endregion\n\nfunction InterfaceEditor(): ReactElement {\n  const { user } = useContext(AuthContext).authState;\n\n  const { mode } = useParams<{ mode: string }>();\n  const apiType = useMemo(() => {\n    switch (mode) {\n      case 'openapi':\n        return ApiType.OPEN_API;\n      case 'asyncapi':\n        return ApiType.ASYNC_API;\n      default:\n        return undefined;\n    }\n  }, [mode]);\n\n  const {\n    control,\n    register,\n    handleSubmit,\n    errors,\n    reset: resetForm,\n    setError,\n  } = useForm({\n    resolver: yupResolver(ApiSchema),\n  });\n\n  // #region Load Apis\n  const [apiOptions, setApiOptions] = useState<ApiOption[]>();\n\n  const loadApis = useCallback(\n    async (type: ApiType) => {\n      if (!user) {\n        return;\n      }\n\n      try {\n        const loadedApis = await getApis(type, true, user.id);\n\n        setApiOptions(\n          loadedApis.map((api) => ({\n            value: api,\n            label: api.name,\n          })),\n        );\n      } catch (err) {\n        console.log('Error loading apis', err);\n      }\n    },\n    [user],\n  );\n\n  useEffect(() => {\n    if (apiType !== undefined) {\n      loadApis(apiType);\n    }\n  }, [apiType, loadApis]);\n  // #endregion\n\n  // #region Api Selection\n  const [selectedApiOption, setSelectedApiOption] = useState<ApiOption | null>(\n    null,\n  );\n  const selectedApi = useMemo(() => {\n    return selectedApiOption?.value;\n  }, [selectedApiOption]);\n  // #endregion\n\n  // #region Fully load selected Api\n  useEffect(() => {\n    async function loadFullApiData() {\n      if (!selectedApi) {\n        resetForm({});\n        return;\n      }\n\n      try {\n        const apiData = await getApi(selectedApi.id, false);\n\n        resetForm({\n          name: apiData.name,\n          metadata: apiData.metadata,\n          apiSpec: JSON.parse(apiData.apiSpec),\n        });\n      } catch (err) {\n        console.log(err);\n      }\n    }\n\n    loadFullApiData();\n  }, [selectedApi, resetForm]);\n  // #endregion\n\n  // #region Upsert Api\n  async function handleUpsert(apiData: ApiData) {\n    if (apiType === undefined) {\n      return;\n    }\n\n    try {\n      await upsertApi({\n        ...apiData,\n        apiSpec: JSON.stringify(apiData.apiSpec),\n        id: selectedApi?.id,\n        createdBy: user?.id,\n        type: selectedApi?.type ?? apiType,\n      });\n\n      loadApis(apiType);\n      resetForm({});\n      setSelectedApiOption(null);\n\n      setError('success', {\n        type: 'manual',\n        message: 'API was updated successfully.',\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  }\n  // #endregion\n\n  return (\n    <div className=\"content-page flex flex-col items-center\">\n      <form\n        noValidate\n        onSubmit={handleSubmit(handleUpsert)}\n        className=\"mt-4 flex flex-col shadow-lg p-8 rounded\"\n      >\n        <p className=\"font-bold text-sm\">APIs</p>\n        <Select\n          className=\"w-full\"\n          value={selectedApiOption}\n          isSearchable\n          isClearable\n          onChange={(value) => setSelectedApiOption(value)}\n          options={apiOptions}\n          filterOption={optionFilter}\n        />\n\n        <p className=\"mt-4 font-bold text-sm\">Name</p>\n        <ValidatedInput name=\"name\" register={register} errors={errors}>\n          <input type=\"test\" className=\"input\" />\n        </ValidatedInput>\n\n        <p className=\"mt-2 font-bold text-sm\">Metadata</p>\n        <div className=\"flex\">\n          <div className=\"mr-1\">\n            <p className=\"font-bold text-sm\">Company</p>\n            <ValidatedInput\n              name=\"metadata.company\"\n              register={register}\n              errors={errors}\n            >\n              <input type=\"test\" className=\"input\" />\n            </ValidatedInput>\n          </div>\n          <div className=\"ml-1\">\n            <p className=\"font-bold text-sm\">Keywords</p>\n            <ValidatedInput\n              name=\"metadata.keywords\"\n              register={register}\n              errors={errors}\n            >\n              <input type=\"test\" className=\"input\" />\n            </ValidatedInput>\n          </div>\n        </div>\n\n        <p className=\"mt-2 font-bold text-sm\">Api Specification</p>\n        <div className=\"max-w-md\">\n          <Controller\n            name=\"apiSpec\"\n            control={control}\n            defaultValue={{}}\n            render={({ onChange, value }) => (\n              <JsonEditor value={value} onChange={onChange} />\n            )}\n          />\n          {errors.apiSpec && (\n            <p className=\"h-6 text-sm text-red-600\">{errors.apiSpec.message}</p>\n          )}\n        </div>\n\n        <button\n          type=\"submit\"\n          className=\"mt-4 button shadow-lg bg-red-900 text-white\"\n        >\n          Save\n        </button>\n        {errors.success && (\n          <p className=\"text-sm text-green-600\">{errors.success.message}</p>\n        )}\n      </form>\n    </div>\n  );\n}\n\nexport default InterfaceEditor;\n","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/services/apiservice.ts",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/models/ApiModel.ts",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/JsonEditor.tsx",["275","276","277"],"import React, { ReactElement, useEffect, useRef } from 'react';\nimport 'jsoneditor-react/es/editor.min.css';\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst { JsonEditor: Editor } = require('jsoneditor-react');\n\ninterface JsonEditorProps {\n  value: any;\n  onChange?: (data: any) => void;\n  readonly?: boolean;\n}\nfunction JsonEditor(props: JsonEditorProps): ReactElement {\n  const { value, onChange = () => {}, readonly = false } = props;\n  const editorRef = useRef<any>(null);\n\n  useEffect(() => {\n    editorRef.current?.jsonEditor?.set(value);\n  }, [value]);\n\n  return (\n    <Editor\n      ref={editorRef}\n      onChange={onChange}\n      mode={readonly ? 'view' : 'text'}\n      allowedMode={[readonly ? 'view' : 'text']}\n      navigationBar={false}\n      statusBar={false}\n      mainMenuBar={false}\n    />\n  );\n}\n\nexport default JsonEditor;\n","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/apiSelection.ts",["278","279"],"import { ApiModel } from 'models/ApiModel';\n\nexport type ApiOption = {\n  value: ApiModel;\n  label: string;\n};\n\nexport function optionFilter(\n  option: any,\n  searchText: string | undefined,\n): boolean {\n  const lowerSearch = searchText?.toLowerCase();\n\n  const { value: api } = option as { value: ApiModel };\n\n  return (\n    !lowerSearch ||\n    api.name.toLowerCase().includes(lowerSearch) ||\n    (api.metadata?.company?.toLowerCase().includes(lowerSearch) ?? false) ||\n    (api.metadata?.keywords?.toLowerCase().includes(lowerSearch) ?? false)\n  );\n}\n\nexport type OperationOption = {\n  value: { operationId: string };\n  label: string;\n};\n\nexport type ResponseOption = {\n  value: { responseId: string };\n  label: string;\n};\n","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/swaggerParser.ts",["280","281","282","283"],"/* eslint-disable @typescript-eslint/no-use-before-define */\nimport SwaggerParser from '@apidevtools/swagger-parser';\nimport { OpenApiModel } from 'models/ApiModel';\nimport { OpenAPI, OpenAPIV2, OpenAPIV3 } from 'openapi-types';\nimport { flattenSchema, removeTypes, Schema } from './schemaHelpers';\n\n// #region Types & constants\nexport type OpenApiOperation = {\n  api: OpenApiModel;\n  operationId: string;\n  responseId: string;\n};\n\nexport const httpMethods = [\n  'get',\n  'post',\n  'delete',\n  'put',\n  'patch',\n  'trace',\n  'head',\n  'options',\n];\n// #endregion\n\nexport async function parseApiSpec(apiSpec: string): Promise<OpenAPI.Document> {\n  const apiSpecObject = JSON.parse(apiSpec);\n\n  return SwaggerParser.validate(apiSpecObject, { validate: { spec: false } });\n}\n\n// #region Get operations details\nfunction getOperation<T extends OpenAPIV2.Document | OpenAPIV3.Document>(\n  apiObject: T,\n  operationId: string,\n):\n  | {\n      path: T extends OpenAPIV2.Document\n        ? OpenAPIV2.PathItemObject\n        : OpenAPIV3.PathItemObject;\n      method: string;\n      pathUrl: string;\n      operation: T extends OpenAPIV2.Document\n        ? OpenAPIV2.OperationObject\n        : OpenAPIV3.OperationObject;\n    }\n  | undefined {\n  const pathObjects: [\n    string,\n    T extends OpenAPIV2.Document\n      ? OpenAPIV2.PathItemObject\n      : OpenAPIV3.PathItemObject,\n  ][] = Object.entries(apiObject.paths);\n\n  for (let i = 0; i < pathObjects.length; i += 1) {\n    const [pathUrl, pathObject] = pathObjects[i];\n    const operationObjects: [\n      string,\n      T extends OpenAPIV2.Document\n        ? OpenAPIV2.OperationObject\n        : OpenAPIV3.OperationObject,\n    ][] = Object.entries(pathObject);\n\n    for (let j = 0; j < operationObjects.length; j += 1) {\n      const [method, operationObject] = operationObjects[j];\n\n      if (operationObject.operationId === operationId) {\n        return {\n          path: pathObject,\n          pathUrl,\n          method,\n          operation: operationObject,\n        };\n      }\n    }\n  }\n\n  return undefined;\n}\n\nexport function getOperationIds(apiObject: OpenAPI.Document): string[] {\n  return Object.values(apiObject.paths).flatMap(\n    (pathObject: OpenAPIV3.PathItemObject | OpenAPIV2.PathItemObject) => {\n      return Object.entries(pathObject)\n        .filter(([key]) => httpMethods.includes(key))\n        .map(([, operation]) => {\n          return operation.operationId;\n        });\n    },\n  );\n}\n\nexport function getResponseCodes(\n  apiObject: OpenAPI.Document,\n  operationId: string,\n): string[] {\n  const { operation } = getOperation(apiObject, operationId) ?? {};\n\n  if (!operation?.responses) {\n    return [];\n  }\n\n  return Object.keys(operation.responses);\n}\n// #endregion\n\n// #region Get server details\nfunction getServersV2(apiObject: OpenAPIV2.Document): string[] | undefined {\n  return apiObject.schemes?.map(\n    (scheme) => scheme + apiObject.host + apiObject.basePath,\n  );\n}\n\nfunction getServersV3(apiObject: OpenAPIV3.Document): string[] | undefined {\n  return apiObject.servers?.map((server) => {\n    return Object.entries(server.variables || []).reduce(\n      (url, [varname, value]) =>\n        url.replace(new RegExp(`{${varname}}`, 'g'), value.default),\n      server.url,\n    );\n  });\n}\n// #endregion\n\n// #region Request schema\nexport function getRequestSchema(\n  apiObject: OpenAPI.Document,\n  operationId: string,\n  ignoreOptional = false,\n): Schema | undefined {\n  const result = getOperation(apiObject, operationId);\n  if (result === undefined) {\n    return undefined;\n  }\n\n  const { path, operation } = result;\n\n  // V3\n  if (isOpenApiV3(apiObject)) {\n    const parameters = getV3Parameters(\n      path as OpenAPIV3.PathItemObject,\n      operation as OpenAPIV3.OperationObject,\n      ignoreOptional,\n    );\n    const body = getV3RequestBody(operation as OpenAPIV3.OperationObject);\n\n    return {\n      ...(parameters\n        ? {\n            parameters: removeTypes(\n              flattenSchema({ type: 'object', properties: parameters }),\n            ),\n          }\n        : null),\n      ...(body && Object.keys(body).length\n        ? { body: removeTypes(flattenSchema(body)) }\n        : null),\n    };\n  }\n\n  // V2\n  const parameters = getV2Parameters(\n    path as OpenAPIV2.PathItemObject,\n    operation as OpenAPIV2.OperationObject,\n    ignoreOptional,\n  );\n  const body = getV2RequestBody(operation as OpenAPIV2.OperationObject);\n\n  return {\n    ...(parameters\n      ? {\n          parameters: removeTypes(\n            flattenSchema({ type: 'object', properties: parameters }),\n          ),\n        }\n      : null),\n    ...(body && Object.keys(body).length\n      ? { body: removeTypes(flattenSchema(body)) }\n      : null),\n  };\n}\n\nfunction getV2Parameters(\n  pathObject: OpenAPIV2.PathItemObject,\n  operationObject: OpenAPIV2.OperationObject,\n  ignoreOptional: boolean,\n) {\n  const combinedParameters = [\n    ...(pathObject.parameters ?? []),\n    ...(operationObject.parameters ?? []),\n  ] as (OpenAPIV2.InBodyParameterObject | OpenAPIV2.GeneralParameterObject)[];\n\n  const filteredParameters = combinedParameters.filter(\n    (parameter) =>\n      parameter.in !== 'body' &&\n      (!ignoreOptional || parameter.in === 'path' || parameter.required),\n  );\n\n  if (filteredParameters.length === 0) {\n    return undefined;\n  }\n\n  return filteredParameters.reduce<Record<string, any>>(\n    (obj, parameter) => ({\n      ...obj,\n      [parameter.name]: parameter.schema,\n    }),\n    {},\n  );\n}\n\nfunction getV3Parameters(\n  pathObject: OpenAPIV3.PathItemObject,\n  operationObject: OpenAPIV3.OperationObject,\n  ignoreOptional: boolean,\n) {\n  const combinedParameters = [\n    ...(pathObject.parameters ?? []),\n    ...(operationObject.parameters ?? []),\n  ] as OpenAPIV3.ParameterObject[];\n\n  const filteredParameters = combinedParameters.filter(\n    (parameter) =>\n      parameter.in !== 'body' &&\n      (!ignoreOptional || parameter.in === 'path' || parameter.required),\n  );\n\n  if (filteredParameters.length === 0) {\n    return undefined;\n  }\n\n  return filteredParameters.reduce<Record<string, any>>(\n    (obj, parameter) => ({\n      ...obj,\n      [parameter.name]: parameter.schema,\n    }),\n    {},\n  );\n}\n\nfunction getV2RequestBody(operationObject: OpenAPIV2.OperationObject) {\n  const params = operationObject.parameters as OpenAPIV2.InBodyParameterObject[];\n  const bodyParameters = params?.filter((parameter) => parameter.in === 'body');\n\n  return {\n    type: 'object',\n    properties:\n      bodyParameters?.reduce(\n        (obj, parameter) => ({\n          ...obj,\n          [parameter.name]: parameter.schema,\n        }),\n        {},\n      ) ?? {},\n  };\n}\n\nfunction getV3RequestBody(operationObject: OpenAPIV3.OperationObject) {\n  const requestBody = operationObject.requestBody as\n    | OpenAPIV3.RequestBodyObject\n    | undefined;\n\n  return requestBody?.content?.['application/json'].schema;\n}\n// #endregion\n\n// #region Response schema\nexport function getResponseSchema(\n  apiObject: OpenAPI.Document,\n  operationId: string,\n  responseId: string,\n): Schema | undefined {\n  const result = getOperation(apiObject, operationId);\n  if (result === undefined) {\n    return undefined;\n  }\n\n  const { operation } = result;\n\n  // V3\n  if (isOpenApiV3(apiObject)) {\n    const body = getV3ResponseBody(\n      operation as OpenAPIV3.OperationObject,\n      responseId,\n    );\n\n    return removeTypes(flattenSchema(body ?? {}));\n  }\n\n  // V2\n  const body = getV2ResponseBody(\n    operation as OpenAPIV2.OperationObject,\n    responseId,\n  );\n\n  return removeTypes(flattenSchema(body));\n}\n\nfunction getV2ResponseBody(\n  operationObject: OpenAPIV2.OperationObject,\n  responseId: string,\n) {\n  const response = operationObject.responses?.[responseId] as\n    | OpenAPIV2.ResponseObject\n    | undefined;\n\n  return response?.schema;\n}\n\nfunction getV3ResponseBody(\n  operationObject: OpenAPIV3.OperationObject,\n  responseId: string,\n) {\n  const response = operationObject.responses?.[responseId] as\n    | OpenAPIV3.ResponseObject\n    | undefined;\n\n  return response?.content?.['application/json'].schema;\n}\n// #endregion\n\n// #region Request URL\nexport function getRequestUrl(\n  apiObject: OpenAPI.Document,\n  operationId: string,\n  paramValues: Record<string, string> = {},\n): { method: string; url: string } | undefined {\n  const servers = isOpenApiV3(apiObject)\n    ? getServersV3(apiObject)\n    : getServersV2(apiObject);\n  const operationResult = getOperation(apiObject, operationId);\n  console.log(servers, apiObject, operationId, operationResult);\n\n  if (!servers || servers.length === 0 || !operationResult) {\n    return undefined;\n  }\n\n  const { pathUrl, method, path, operation } = operationResult;\n  const server = servers[0];\n\n  // Get all required parameters\n  const parameters = [\n    ...(path.parameters || []),\n    ...(operation.parameters || []),\n  ] as (\n    | OpenAPIV3.ParameterObject\n    | OpenAPIV2.InBodyParameterObject\n    | OpenAPIV2.GeneralParameterObject\n  )[];\n\n  const query = parameters\n    .filter((p) => p.in === 'query')\n    .map((p) => paramValues[p.name] && `${p.name}=${paramValues[p.name]}`)\n    .filter(Boolean)\n    .join('&');\n  const urlWithParams = parameters\n    .filter((p) => p.in === 'path')\n    .reduce(\n      (currUrl, currParam) =>\n        currUrl.replace(\n          new RegExp(`{${currParam.name}}`, 'g'),\n          paramValues[currParam.name] || '',\n        ),\n      pathUrl,\n    );\n\n  return {\n    method,\n    url: `${server}${urlWithParams}${query ? `?${query}` : ''}`,\n  };\n}\n// #endregion\n\n// #region Helpers\nfunction isOpenApiV3(doc: any): doc is OpenAPIV3.Document {\n  return doc.openapi !== undefined;\n}\n// #endregion\n","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/Icons/ClearIcon.tsx",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/Icons/AddIcon.tsx",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/services/mappingservice.ts",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/toTree.ts",["284","285"],"export function buildNodes(jsonObject: any, parentKey = ''): JsonTreeNode[] {\n  if (\n    jsonObject &&\n    typeof jsonObject === 'object' &&\n    !Array.isArray(jsonObject)\n  ) {\n    return Object.keys(jsonObject).map((key) => {\n      const flattenedKey = `${parentKey}${parentKey ? '.' : ''}${key}`;\n\n      return {\n        name: key,\n        key: flattenedKey,\n        children: buildNodes(jsonObject[key], flattenedKey),\n      };\n    });\n  }\n\n  return [];\n}\n\nexport interface JsonTreeNode {\n  name: string;\n  key: string;\n  children?: JsonTreeNode[];\n}\n\nexport type KeyChain = Array<string>;\n",["286","287","288","289","290","291"],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/models/MappingModel.ts",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/contexts/MappingContext.tsx",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/MappingContainer.tsx",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/MappingArea.tsx",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/SchemaTree.tsx",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/MappingTransformationEditor.tsx",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/escapeJsonata.ts",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/Icons/CheckIcon.tsx",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/MappingTest.tsx",["292","293","294","295","296","297"],"import { MappingPair } from 'models/MappingModel';\nimport React, {\n  Fragment,\n  ReactElement,\n  useCallback,\n  useEffect,\n  useState,\n} from 'react';\nimport jsonata from 'jsonata';\nimport { pairs2Trans } from 'services/mappingservice';\nimport stringified2Jsonata from 'utils/helpers/stringIfiedToJsonata';\nimport axios from 'axios';\nimport { getRequestUrl, OpenApiOperation } from 'utils/helpers/swaggerParser';\nimport { Collapse } from 'react-collapse';\nimport { Schema } from 'utils/helpers/schemaHelpers';\nimport JsonEditor from './JsonEditor';\nimport ChevronRightIcon from './Icons/ChevronRightIcon';\n\ninterface MappingTestProps {\n  requestMappingPairs: MappingPair[];\n  responseMappingPairs: MappingPair[];\n  sourceRequestSchema?: Schema;\n  targetOperations?: Record<string, OpenApiOperation>;\n}\nfunction MappingTest(props: MappingTestProps): ReactElement {\n  const {\n    requestMappingPairs,\n    responseMappingPairs,\n    sourceRequestSchema,\n    targetOperations,\n  } = props;\n\n  const [expanded, setExpanded] = useState<boolean>(false);\n\n  const [requestData, setRequestData] = useState<any>({});\n  useEffect(() => setRequestData(sourceRequestSchema ?? {}), [\n    sourceRequestSchema,\n  ]);\n  const [responseData, setResponseData] = useState<any>({});\n\n  const [logs, setLogs] = useState<string[]>();\n  const [error, setError] = useState<string>();\n\n  // #region Execute request\n  const executeRequest = useCallback(async () => {\n    setError(undefined);\n    setLogs(undefined);\n\n    try {\n      const requestMapping = pairs2Trans(requestMappingPairs);\n      const requestMappingString = stringified2Jsonata(\n        JSON.stringify(requestMapping),\n      );\n\n      const targetsRequestData: Record<string, any> = jsonata(\n        requestMappingString,\n      ).evaluate(requestData);\n\n      const targetResponseData: Record<string, any> = {};\n      const promises = Object.entries(targetsRequestData).map(\n        async ([targetOperationId, targetRequestData]) => {\n          if (\n            targetOperations?.[targetOperationId]?.api.apiObject === undefined\n          ) {\n            return;\n          }\n\n          const urlResponse = getRequestUrl(\n            targetOperations[targetOperationId].api.apiObject!,\n            targetOperations[targetOperationId].operationId,\n            targetRequestData.parameters,\n          );\n\n          if (!urlResponse) {\n            return;\n          }\n\n          const { method, url } = urlResponse;\n\n          setLogs((currentLogs) => [\n            ...(currentLogs || []),\n            `Querying endpoint at: ${url}`,\n          ]);\n          targetResponseData[targetOperationId] = await axios\n            .request({\n              method: method as any,\n              url,\n              data: targetRequestData.body,\n              responseType: 'json',\n            })\n            .then((r) => r.data);\n        },\n      );\n\n      await Promise.all(promises);\n\n      const responseMapping = pairs2Trans(responseMappingPairs);\n      const responseMappingString = stringified2Jsonata(\n        JSON.stringify(responseMapping),\n      );\n      const sourceResponseData = jsonata(responseMappingString).evaluate(\n        targetResponseData,\n      );\n\n      setResponseData(sourceResponseData);\n    } catch (err) {\n      const message = `An error occurred during your request: ${err.message}.${\n        err.value ? ` Received value: ${JSON.stringify(err.value)}` : ''\n      }`;\n\n      setError(message);\n      setResponseData({});\n    }\n  }, [\n    requestData,\n    requestMappingPairs,\n    responseMappingPairs,\n    targetOperations,\n  ]);\n  // #endregion\n\n  return (\n    <>\n      <button\n        type=\"button\"\n        className=\"divider relative mt-4\"\n        onClick={() => setExpanded((curr) => !curr)}\n      >\n        Test Request\n        <ChevronRightIcon\n          className={`absolute w-5 h-5 right-4 transition-all transform ${\n            expanded ? '-rotate-90' : 'rotate-90'\n          } `}\n        />\n      </button>\n\n      <Collapse isOpened={expanded}>\n        <div className=\"flex flex-col pt-2\">\n          <div className=\"flex\">\n            <div className=\"w-1/2 mr-1\">\n              Request Data\n              <JsonEditor value={requestData} onChange={setRequestData} />\n            </div>\n            <div className=\"w-1/2 ml-1\">\n              Response Data\n              <JsonEditor value={responseData} readonly />\n            </div>\n          </div>\n\n          {logs && (\n            <div className=\"text-green-600\">\n              Logs:\n              <br />\n              {logs.map((line) => (\n                <Fragment key={line}>\n                  {line}\n                  <br />\n                </Fragment>\n              ))}\n            </div>\n          )}\n          {error && <div className=\"text-red-600\">{error}</div>}\n\n          <div className=\"flex justify-end\">\n            <button\n              type=\"button\"\n              className=\"button bg-red-900 text-white\"\n              onClick={executeRequest}\n            >\n              Execute\n            </button>\n          </div>\n        </div>\n      </Collapse>\n    </>\n  );\n}\n\nexport default MappingTest;\n","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/stringIfiedToJsonata.ts",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/Spinner.tsx",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/services/adapterservice.ts",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/download.ts",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/InfoModal.tsx",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/pages/MappingEditor.tsx",["298","299","300","301","302","303","304","305","306","307"],"import InfoModal from 'components/InfoModal';\nimport MappingContainer from 'components/MappingContainer';\nimport Spinner from 'components/Spinner';\nimport { MappingContextProvider } from 'contexts/MappingContext';\nimport flatten from 'flat';\nimport { ApiType, AsyncApiModel, OpenApiModel } from 'models/ApiModel';\nimport {\n  AsyncApiMappingModel,\n  MappingDirection,\n  MappingModel,\n  MappingPair,\n  OpenApiMappingModel,\n} from 'models/MappingModel';\nimport React, {\n  ReactElement,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from 'react';\nimport { useParams } from 'react-router';\nimport Select from 'react-select';\nimport { getApi } from 'services/apiservice';\nimport { AuthContext } from 'services/auth/authcontext';\nimport {\n  getMappings,\n  pairs2Trans,\n  trans2Pairs,\n  updateMapping,\n} from 'services/mappingservice';\nimport { Schema } from 'utils/helpers/schemaHelpers';\nimport {\n  getRequestSchema,\n  getResponseSchema,\n  parseApiSpec as parseOpenApiSpec,\n} from 'utils/helpers/swaggerParser';\nimport {\n  getMessageSchema,\n  parseApiSpec as parseAsyncApiSpec,\n} from 'utils/helpers/asyncApiParser';\nimport { clusterMappingPairs } from 'utils/helpers/mappingHelpers';\n\ntype MappingOption = {\n  value: MappingModel;\n  label: string;\n};\n\nfunction MappingEditor(): ReactElement {\n  const { authState } = useContext(AuthContext);\n\n  const [error, setError] = useState<string>();\n\n  // #region Api mode\n  const { mode } = useParams<{ mode: string }>();\n  const apiType = useMemo(() => {\n    switch (mode) {\n      case 'openapi':\n        return ApiType.OPEN_API;\n      case 'asyncapi':\n        return ApiType.ASYNC_API;\n      default:\n        return undefined;\n    }\n  }, [mode]);\n  // #endregion\n\n  // #region Load Mappings\n  const [mappingOptions, setMappingOptions] = useState<MappingOption[]>();\n\n  useEffect(() => {\n    if (authState.user) {\n      getMappings({ createdBy: authState.user.id, apiType }).then(\n        (mappings) => {\n          setMappingOptions(\n            mappings.map((mapping) => ({\n              value: mapping,\n              label: `${mapping.sourceId} -> ${mapping.targetIds}`,\n            })),\n          );\n        },\n      );\n    }\n  }, [authState, apiType]);\n  // #endregion\n\n  // #region Mapping selection\n  const [\n    selectedMappingOption,\n    setSelectedMappingOption,\n  ] = useState<MappingOption | null>(null);\n\n  const selectedMapping = useMemo(\n    () => selectedMappingOption && selectedMappingOption.value,\n    [selectedMappingOption],\n  );\n\n  const mappingDirection = useMemo<MappingDirection | undefined>(() => {\n    if (selectedMapping?.apiType === ApiType.ASYNC_API) {\n      return (selectedMapping as AsyncApiMappingModel).direction;\n    }\n\n    return undefined;\n  }, [selectedMapping]);\n  // #endregion\n\n  // #region Mapping data\n  const [requestData, setRequestData] = useState<{\n    mappingPairs: MappingPair[];\n    sourceSchema: Record<string, Schema>;\n    targetSchema: Record<string, Schema>;\n  }>();\n  const [responseData, setResponseData] = useState<{\n    mappingPairs: MappingPair[];\n    sourceSchema: Record<string, Schema>;\n    targetSchema: Record<string, Schema>;\n  }>();\n\n  useEffect(() => {\n    async function loadOpenApiMappingData() {\n      if (!selectedMapping) {\n        return;\n      }\n\n      // [apiId, operationId, responseId]\n      const sourceIdData = selectedMapping.sourceId.split('_');\n      const targetIdData = selectedMapping.targetIds.map((targetId) =>\n        targetId.split('_'),\n      );\n\n      const [sourceApi, ...targetApis] = await Promise.all<OpenApiModel>(\n        [\n          getApi<OpenApiModel>(sourceIdData[0], false),\n          ...targetIdData.map((idData) =>\n            getApi<OpenApiModel>(idData[0], false),\n          ),\n        ].map(async (apiPromise) => {\n          const api = await apiPromise;\n          const apiObject = await parseOpenApiSpec(api.apiSpec);\n          return {\n            ...api,\n            apiObject,\n          };\n        }),\n      );\n\n      const sourceRequestSchema = {\n        [sourceIdData.join('_')]:\n          getRequestSchema(sourceApi.apiObject!, sourceIdData[1]) ?? {},\n      };\n      const sourceResponseSchema = {\n        [sourceIdData.join('_')]:\n          getResponseSchema(\n            sourceApi.apiObject!,\n            sourceIdData[1],\n            sourceIdData[2],\n          ) ?? {},\n      };\n\n      const targetRequestSchema = targetIdData.reduce<Record<string, Schema>>(\n        (schema, idData) => {\n          const targetApi = targetApis.find((api) => api.id === idData[0]);\n          const requestSchema = getRequestSchema(\n            targetApi!.apiObject!,\n            idData[1],\n          );\n\n          if (!requestSchema) {\n            return schema;\n          }\n\n          return {\n            ...schema,\n            [idData.join('_')]: requestSchema,\n          };\n        },\n        {},\n      );\n      const targetResponseSchema = targetIdData.reduce<Record<string, Schema>>(\n        (schema, idData) => {\n          const targetApi = targetApis.find((api) => api.id === idData[0]);\n          const responseSchema = getResponseSchema(\n            targetApi!.apiObject!,\n            idData[1],\n            idData[2],\n          );\n\n          if (!responseSchema) {\n            return schema;\n          }\n\n          return {\n            ...schema,\n            [idData.join('_')]: responseSchema,\n          };\n        },\n        {},\n      );\n\n      const requestMappingPairs = trans2Pairs(\n        JSON.parse((selectedMapping as OpenApiMappingModel).requestMapping),\n      );\n      const responseMappingPairs = trans2Pairs(\n        JSON.parse((selectedMapping as OpenApiMappingModel).responseMapping),\n      );\n\n      setRequestData({\n        mappingPairs: requestMappingPairs,\n        sourceSchema: sourceRequestSchema,\n        targetSchema: targetRequestSchema,\n      });\n\n      setResponseData({\n        mappingPairs: responseMappingPairs,\n        sourceSchema: sourceResponseSchema,\n        targetSchema: targetResponseSchema,\n      });\n    }\n\n    async function loadAsyncApiMappingData() {\n      if (!selectedMapping) {\n        return;\n      }\n\n      // [apiId, operationId]\n      const sourceIdData = selectedMapping.sourceId.split('_');\n      const targetIdData = selectedMapping.targetIds.map((targetId) =>\n        targetId.split('_'),\n      );\n\n      const [sourceApi, ...targetApis] = await Promise.all<AsyncApiModel>(\n        [\n          getApi<AsyncApiModel>(sourceIdData[0], false),\n          ...targetIdData.map((idData) =>\n            getApi<AsyncApiModel>(idData[0], false),\n          ),\n        ].map(async (apiPromise) => {\n          const api = await apiPromise;\n          const apiObject = await parseAsyncApiSpec(api.apiSpec);\n          return {\n            ...api,\n            apiObject,\n          };\n        }),\n      );\n\n      const sourceMessageSchema = {\n        [sourceIdData.join('_')]:\n          getMessageSchema(sourceApi.apiObject!, sourceIdData[1]) ?? {},\n      };\n\n      const targetMessageSchema = targetIdData.reduce<Record<string, Schema>>(\n        (schema, idData) => {\n          const targetApi = targetApis.find((api) => api.id === idData[0]);\n          const requestSchema = getMessageSchema(\n            targetApi!.apiObject!,\n            idData[1],\n          );\n\n          if (!requestSchema) {\n            return schema;\n          }\n\n          return {\n            ...schema,\n            [idData.join('_')]: requestSchema,\n          };\n        },\n        {},\n      );\n\n      const mapping = selectedMapping as AsyncApiMappingModel;\n      const messageMappingPairs = Object.values(\n        mapping.messageMappings,\n      ).flatMap((rawMapping) => trans2Pairs(JSON.parse(rawMapping)));\n\n      setRequestData({\n        mappingPairs: messageMappingPairs,\n        sourceSchema: sourceMessageSchema,\n        targetSchema: targetMessageSchema,\n      });\n    }\n\n    if (selectedMapping?.apiType === ApiType.ASYNC_API) {\n      loadAsyncApiMappingData();\n    } else if (selectedMapping?.apiType === ApiType.OPEN_API) {\n      loadOpenApiMappingData();\n    }\n  }, [selectedMapping]);\n  // #endregion\n\n  // #region Updated mapping data\n  const [\n    updatedRequestMappingPairState,\n    setUpdatedRequestMappingPairState,\n  ] = useState<{\n    mappingPairs: MappingPair[];\n    preventUpdate?: boolean;\n  }>({\n    mappingPairs: [],\n  });\n\n  const [\n    updatedResponseMappingPairState,\n    setUpdatedResponseMappingPairState,\n  ] = useState<{\n    mappingPairs: MappingPair[];\n    preventUpdate?: boolean;\n  }>({\n    mappingPairs: [],\n  });\n  // #endregion\n\n  // #region Determine current mapping validity\n  const isValidOpenApi = useCallback(() => {\n    if (!selectedMapping || !requestData || !responseData) {\n      return false;\n    }\n\n    const combinedMappingPairs = [\n      ...updatedRequestMappingPairState.mappingPairs,\n      ...updatedResponseMappingPairState.mappingPairs,\n    ];\n\n    if (\n      combinedMappingPairs.some(\n        (mappingPair) => !mappingPair.mappingTransformation,\n      )\n    ) {\n      return false;\n    }\n\n    const flatTargetRequest = Object.keys(flatten(requestData.targetSchema));\n    const flatRequestMapping = Object.keys(\n      flatten(pairs2Trans(updatedRequestMappingPairState.mappingPairs)),\n    );\n\n    const flatSourceResponse = Object.keys(flatten(responseData.sourceSchema));\n    const flatResponseMapping = Object.keys(\n      flatten(pairs2Trans(updatedResponseMappingPairState.mappingPairs)),\n    );\n\n    const missingRequest = flatTargetRequest.filter(\n      (attributeId) => !flatRequestMapping.includes(attributeId),\n    );\n    const missingResponse = flatSourceResponse.filter(\n      (attributeId) => !flatResponseMapping.includes(attributeId),\n    );\n\n    return missingRequest.length === 0 && missingResponse.length === 0;\n  }, [\n    requestData,\n    responseData,\n    selectedMapping,\n    updatedRequestMappingPairState.mappingPairs,\n    updatedResponseMappingPairState.mappingPairs,\n  ]);\n\n  const isValidAsyncApi = useCallback(() => {\n    if (!selectedMapping || !requestData || mappingDirection === undefined) {\n      return false;\n    }\n\n    if (\n      updatedRequestMappingPairState.mappingPairs.some(\n        (mappingPair) => !mappingPair.mappingTransformation,\n      )\n    ) {\n      return false;\n    }\n\n    const clusteredMappingPairs = clusterMappingPairs(\n      updatedRequestMappingPairState.mappingPairs,\n      mappingDirection,\n    );\n\n    const valid = Object.keys(requestData.targetSchema).every((targetId) => {\n      // Check for every target\n      const flatRequiredSchema = Object.keys(\n        flatten(\n          mappingDirection === MappingDirection.INPUT\n            ? requestData.sourceSchema\n            : { [targetId]: requestData.targetSchema[targetId] }, // Extract a single target\n        ),\n      );\n      const flatMapping = Object.keys(\n        flatten(pairs2Trans(clusteredMappingPairs[targetId] ?? [])),\n      );\n\n      const missing = flatRequiredSchema.filter(\n        (attributeId) => !flatMapping.includes(attributeId),\n      );\n\n      return missing.length === 0;\n    });\n\n    return valid;\n  }, [\n    mappingDirection,\n    requestData,\n    selectedMapping,\n    updatedRequestMappingPairState.mappingPairs,\n  ]);\n\n  const isValid = useMemo(() => {\n    if (apiType === ApiType.OPEN_API) {\n      return isValidOpenApi();\n    }\n    if (apiType === ApiType.ASYNC_API) {\n      return isValidAsyncApi();\n    }\n    return undefined;\n  }, [apiType, isValidAsyncApi, isValidOpenApi]);\n  // #endregion\n\n  // #region Handle interactions\n  const [saving, setSaving] = useState<boolean>(false);\n  const handleSaveMapping = useCallback(async () => {\n    if (!isValid || !authState.user?.id || !selectedMapping) {\n      return;\n    }\n\n    setSaving(true);\n\n    const mapping: OpenApiMappingModel = {\n      ...selectedMapping,\n      apiType: ApiType.OPEN_API,\n      requestMapping: JSON.stringify(\n        pairs2Trans(updatedRequestMappingPairState.mappingPairs),\n      ),\n      responseMapping: JSON.stringify(\n        pairs2Trans(updatedResponseMappingPairState.mappingPairs),\n      ),\n    };\n\n    try {\n      await updateMapping(mapping);\n    } catch (err) {\n      console.log(err);\n      setError('An error occurred');\n    } finally {\n      setSaving(false);\n    }\n  }, [\n    isValid,\n    authState.user?.id,\n    selectedMapping,\n    updatedRequestMappingPairState.mappingPairs,\n    updatedResponseMappingPairState.mappingPairs,\n  ]);\n  // #endregion\n\n  return (\n    <div className=\"w-11/12 flex flex-col pb-8\">\n      <InfoModal\n        isOpen={error !== undefined}\n        onDismiss={() => setError(undefined)}\n        header=\"Error\"\n        message={error ?? ''}\n      />\n\n      <Select\n        className=\"w-full\"\n        value={selectedMappingOption}\n        isClearable\n        onChange={(value) => setSelectedMappingOption(value ?? null)}\n        options={mappingOptions}\n      />\n\n      {selectedMapping && (\n        <>\n          {requestData && (\n            <MappingContextProvider>\n              <MappingContainer\n                title=\"Request\"\n                required={\n                  mappingDirection === MappingDirection.INPUT\n                    ? 'source'\n                    : 'target' // Will be target if mapping direction is undefined (i.e. OpenApi mapping)\n                }\n                strict={false}\n                noMixed={apiType === ApiType.ASYNC_API}\n                allowMultiMapping={apiType === ApiType.ASYNC_API}\n                requireProvided={mappingDirection === MappingDirection.INPUT}\n                mappingPairs={requestData.mappingPairs}\n                sourceSchema={requestData.sourceSchema}\n                targetSchema={requestData.targetSchema}\n                onMappingPairsChange={(mappingPairs) => {\n                  setUpdatedRequestMappingPairState({\n                    mappingPairs,\n                  });\n                }}\n              />\n            </MappingContextProvider>\n          )}\n          {responseData && (\n            <MappingContextProvider>\n              <MappingContainer\n                title=\"Response\"\n                required=\"source\"\n                strict={false}\n                mappingPairs={responseData.mappingPairs}\n                sourceSchema={responseData.sourceSchema}\n                targetSchema={responseData.targetSchema}\n                onMappingPairsChange={(mappingPairs) =>\n                  setUpdatedResponseMappingPairState({\n                    mappingPairs,\n                  })\n                }\n              />\n            </MappingContextProvider>\n          )}\n        </>\n      )}\n\n      <div className=\"mt-6 flex\">\n        <div className=\"flex-1\" />\n        <button\n          type=\"button\"\n          disabled={saving || !isValid}\n          className=\"button inline-flex items-center bg-green-800 text-white disabled:opacity-40\"\n          onClick={handleSaveMapping}\n        >\n          {saving ? (\n            <>\n              <Spinner />\n              Saving...\n            </>\n          ) : (\n            'Save Mapping'\n          )}\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default MappingEditor;\n","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/get-inputs/get-inputs.js",[],["308","309","310","311","312","313"],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/get-inputs/utils.js",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/get-inputs/datetime.js",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/get-inputs/parser.js",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/get-inputs/functions.js",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/get-inputs/signature.js",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/PrivateRoute.tsx",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/pages/OpenApiMappingCreator.tsx",["314","315","316","317"],"/* eslint-disable @typescript-eslint/no-use-before-define */\nimport AddIcon from 'components/Icons/AddIcon';\nimport ClearIcon from 'components/Icons/ClearIcon';\nimport MappingContainer from 'components/MappingContainer';\nimport { MappingContextProvider } from 'contexts/MappingContext';\nimport { ApiType, OpenApiModel } from 'models/ApiModel';\nimport {\n  MappingPair,\n  MappingType,\n  OpenApiMappingModel,\n} from 'models/MappingModel';\nimport React, {\n  ReactElement,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from 'react';\nimport Select from 'react-select';\nimport { getApi, getApis } from 'services/apiservice';\nimport { AuthContext } from 'services/auth/authcontext';\nimport {\n  createMapping,\n  generateMapping,\n  getMappedOperations,\n  MappedOperations,\n  pairs2Trans,\n  recomputeAttributeMapping,\n} from 'services/mappingservice';\nimport {\n  ApiOption,\n  ResponseOption,\n  OperationOption,\n  optionFilter,\n} from 'utils/helpers/apiSelection';\nimport {\n  parseApiSpec,\n  getOperationIds,\n  getResponseCodes,\n  OpenApiOperation,\n  getRequestSchema,\n  getResponseSchema,\n} from 'utils/helpers/swaggerParser';\nimport { flatten } from 'flat';\nimport MappingTest from 'components/MappingTest';\nimport generateAdapter from 'services/adapterservice';\nimport downloadFile from 'utils/helpers/download';\nimport InfoModal from 'components/InfoModal';\nimport ActionBar from 'components/ActionBar';\nimport { Schema } from 'utils/helpers/schemaHelpers';\n\nfunction OpenApiMappingCreator(): ReactElement {\n  const { authState } = useContext(AuthContext);\n\n  const [error, setError] = useState<string>();\n\n  // #region Load Apis\n  const [apiOptions, setApiOptions] = useState<ApiOption[]>([]);\n\n  const loadApis = useCallback(async (type: ApiType) => {\n    try {\n      const loadedApis = await getApis(type, true);\n\n      setApiOptions(\n        loadedApis.map((api) => ({\n          value: api,\n          label: api.name,\n        })),\n      );\n    } catch (err) {\n      console.log('Error loading apis', err);\n    }\n  }, []);\n\n  useEffect(() => {\n    loadApis(ApiType.OPEN_API);\n  }, [loadApis]);\n  // #endregion\n\n  // #region Operation selections\n  const [partialSourceOperation, setPartialSourceOperation] = useState<\n    Partial<OpenApiOperation>\n  >();\n  const sourceOperation = useMemo<OpenApiOperation | undefined>(() => {\n    if (isValidOperation(partialSourceOperation)) {\n      return partialSourceOperation;\n    }\n\n    return undefined;\n  }, [partialSourceOperation]);\n\n  const [targetOperations, setTargetOperations] = useState<\n    Record<string, OpenApiOperation>\n  >();\n\n  const [sourceRequestSchema, sourceResponseSchema] = useMemo<\n    [Record<string, Schema>, Record<string, Schema>]\n  >(() => {\n    if (!sourceOperation || !sourceOperation.api.apiObject) {\n      return [{}, {}];\n    }\n\n    const requestSchema = {\n      [getId(sourceOperation)]:\n        getRequestSchema(\n          sourceOperation.api.apiObject,\n          sourceOperation.operationId,\n        ) ?? {},\n    };\n\n    const responseSchema = {\n      [getId(sourceOperation)]:\n        getResponseSchema(\n          sourceOperation.api.apiObject,\n          sourceOperation.operationId,\n          sourceOperation.responseId,\n        ) ?? {},\n    };\n\n    return [requestSchema, responseSchema];\n  }, [sourceOperation]);\n\n  const [targetRequestSchema, targetResponseSchema] = useMemo<\n    [Record<string, Schema>, Record<string, Schema>]\n  >(() => {\n    if (!targetOperations) {\n      return [{}, {}];\n    }\n\n    return Object.entries(targetOperations).reduce<\n      [Record<string, Schema>, Record<string, Schema>]\n    >(\n      ([requestSchema, responseSchema], [key, operation]) => {\n        const { api, operationId, responseId } = operation;\n\n        if (!api.apiObject) {\n          return [requestSchema, responseSchema];\n        }\n\n        const reqSchema = getRequestSchema(api.apiObject, operationId);\n        const respSchema = getResponseSchema(\n          api.apiObject,\n          operationId,\n          responseId,\n        );\n\n        if (!reqSchema || !respSchema) {\n          return [requestSchema, responseSchema];\n        }\n\n        return [\n          {\n            ...requestSchema,\n            [key]: reqSchema,\n          },\n          {\n            ...responseSchema,\n            [key]: respSchema,\n          },\n        ];\n      },\n      [{}, {}],\n    );\n  }, [targetOperations]);\n  // #endregion\n\n  // #region Mapping pairs\n  const [requestMappingPairs, setRequestMappingPairs] = useState<MappingPair[]>(\n    [],\n  );\n  const [responseMappingPairs, setResponseMappingPairs] = useState<\n    MappingPair[]\n  >([]);\n\n  const [updatedRequestMappingPairs, setUpdatedRequestMappingPairs] = useState<\n    MappingPair[]\n  >([]);\n\n  const [\n    updatedResponseMappingPairs,\n    setUpdatedResponseMappingPairs,\n  ] = useState<MappingPair[]>([]);\n  // #endregion\n\n  // #region Mapping initialization\n  useEffect(() => {\n    async function initializeMapping() {\n      if (!sourceOperation || !targetOperations) {\n        return;\n      }\n\n      const mappingResult = await generateMapping(\n        sourceOperation,\n        targetOperations,\n      );\n\n      setRequestMappingPairs(mappingResult.mappingPairs.request);\n      setResponseMappingPairs(mappingResult.mappingPairs.response);\n    }\n\n    initializeMapping();\n  }, [sourceOperation, targetOperations]);\n  // #endregion\n\n  // #region Attribute mapping recomputation\n  const handleAddRequestMappingPair = useCallback(\n    async (addedMappingPair: MappingPair) => {\n      if (!sourceOperation || !targetOperations) {\n        return [];\n      }\n\n      const combinedMappingPairs = [\n        ...requestMappingPairs,\n        ...responseMappingPairs,\n        addedMappingPair,\n      ];\n\n      const result = await recomputeAttributeMapping(\n        sourceOperation,\n        targetOperations,\n        combinedMappingPairs,\n      );\n\n      return result.mappingPairs.request;\n    },\n    [\n      requestMappingPairs,\n      responseMappingPairs,\n      sourceOperation,\n      targetOperations,\n    ],\n  );\n\n  const handleAddResponseMappingPair = useCallback(\n    async (addedMappingPair: MappingPair) => {\n      if (!sourceOperation || !targetOperations) {\n        return [];\n      }\n\n      const combinedMappingPairs = [\n        ...requestMappingPairs,\n        ...responseMappingPairs,\n        addedMappingPair,\n      ];\n\n      const result = await recomputeAttributeMapping(\n        sourceOperation,\n        targetOperations,\n        combinedMappingPairs,\n      );\n\n      return result.mappingPairs.response;\n    },\n    [\n      requestMappingPairs,\n      responseMappingPairs,\n      sourceOperation,\n      targetOperations,\n    ],\n  );\n  // #endregion\n\n  // #region Strict mode\n  const [strictEnabled, setStrictEnabled] = useState<boolean>(true);\n  // #endregion\n\n  // #region Determine current mapping validity\n  const isValid = useMemo(() => {\n    if (!targetRequestSchema || !sourceResponseSchema) {\n      return false;\n    }\n\n    const combinedMappingPairs = [\n      ...updatedRequestMappingPairs,\n      ...updatedResponseMappingPairs,\n    ];\n\n    if (\n      combinedMappingPairs.some(\n        (mappingPair) => !mappingPair.mappingTransformation,\n      )\n    ) {\n      return false;\n    }\n\n    const flatTargetRequest = Object.keys(flatten(targetRequestSchema));\n    const flatRequestMapping = Object.keys(\n      flatten(pairs2Trans(updatedRequestMappingPairs)),\n    );\n\n    const flatSourceResponse = Object.keys(flatten(sourceResponseSchema));\n    const flatResponseMapping = Object.keys(\n      flatten(pairs2Trans(updatedResponseMappingPairs)),\n    );\n\n    const missingRequest = flatTargetRequest.filter(\n      (attributeId) => !flatRequestMapping.includes(attributeId),\n    );\n    const missingResponse = flatSourceResponse.filter(\n      (attributeId) => !flatResponseMapping.includes(attributeId),\n    );\n\n    return missingRequest.length === 0 && missingResponse.length === 0;\n  }, [\n    sourceResponseSchema,\n    targetRequestSchema,\n    updatedRequestMappingPairs,\n    updatedResponseMappingPairs,\n  ]);\n  // #endregion\n\n  // #region Interaction handlers\n  const handleClear = useCallback(() => {\n    setPartialSourceOperation(undefined);\n    setTargetOperations(undefined);\n    setRequestMappingPairs([]);\n    setResponseMappingPairs([]);\n  }, []);\n\n  const [saving, setSaving] = useState<boolean>(false);\n  const handleSaveMapping = useCallback(async () => {\n    if (\n      !isValid ||\n      !strictEnabled ||\n      !authState.user?.id ||\n      !sourceOperation ||\n      !targetOperations\n    ) {\n      return;\n    }\n\n    setSaving(true);\n\n    const mapping: OpenApiMappingModel = {\n      apiType: ApiType.OPEN_API,\n      type: MappingType.TRANSFORMATION,\n      createdBy: authState.user.id,\n      sourceId: getId(sourceOperation),\n      targetIds: Object.keys(targetOperations),\n      requestMapping: JSON.stringify(pairs2Trans(updatedRequestMappingPairs)),\n      responseMapping: JSON.stringify(pairs2Trans(updatedResponseMappingPairs)),\n    };\n\n    try {\n      await createMapping(mapping);\n    } catch (err) {\n      console.log(err);\n      setError('An error occurred');\n    } finally {\n      setSaving(false);\n      handleClear();\n    }\n  }, [\n    authState,\n    sourceOperation,\n    strictEnabled,\n    isValid,\n    handleClear,\n    targetOperations,\n    updatedRequestMappingPairs,\n    updatedResponseMappingPairs,\n  ]);\n\n  const [adapterCreating, setAdapterCreating] = useState<boolean>(false);\n  const handleCreateAdapter = useCallback(async () => {\n    if (!authState.user?.id || !sourceOperation || !targetOperations) {\n      return;\n    }\n\n    setAdapterCreating(true);\n\n    const mapping: OpenApiMappingModel = {\n      apiType: ApiType.OPEN_API,\n      type: MappingType.TRANSFORMATION,\n      createdBy: authState.user.id,\n      sourceId: getId(sourceOperation),\n      targetIds: Object.keys(targetOperations),\n      requestMapping: JSON.stringify(pairs2Trans(updatedRequestMappingPairs)),\n      responseMapping: JSON.stringify(pairs2Trans(updatedResponseMappingPairs)),\n    };\n\n    try {\n      const downloadLink = await generateAdapter(mapping, 'javascript');\n\n      downloadFile(downloadLink, 'adapter.zip');\n    } catch (err) {\n      console.log(err);\n      setError('An error occurred');\n    } finally {\n      setAdapterCreating(false);\n    }\n  }, [\n    authState,\n    sourceOperation,\n    targetOperations,\n    updatedRequestMappingPairs,\n    updatedResponseMappingPairs,\n  ]);\n  // #endregion\n\n  return (\n    <div className=\"w-11/12 flex flex-col pb-8\">\n      <InfoModal\n        isOpen={error !== undefined}\n        onDismiss={() => setError(undefined)}\n        header=\"Error\"\n        message={error ?? ''}\n      />\n\n      {/* API selection */}\n      <div className=\"flex -mx-1\">\n        <div className=\"w-1/2 px-1 flex flex-col justify-between\">\n          <p className=\"font-bold\">Source</p>\n          <SingleSelection\n            apiOptions={apiOptions}\n            operation={partialSourceOperation}\n            setOperation={setPartialSourceOperation}\n          />\n        </div>\n        <div className=\"w-1/2 px-1 flex flex-col\">\n          <p className=\"font-bold\">Targets</p>\n          <MultiSelection\n            apiOptions={apiOptions}\n            operations={targetOperations}\n            setOperations={setTargetOperations}\n            sourceOperation={sourceOperation}\n          />\n        </div>\n      </div>\n\n      {/* Request */}\n      <MappingContextProvider>\n        <MappingContainer\n          title=\"Request\"\n          required=\"target\"\n          strict={strictEnabled}\n          mappingPairs={requestMappingPairs}\n          onMappingPairsChange={setUpdatedRequestMappingPairs}\n          addMappingInterceptor={handleAddRequestMappingPair}\n          sourceSchema={sourceRequestSchema}\n          targetSchema={targetRequestSchema}\n        />\n      </MappingContextProvider>\n\n      {/* Response */}\n      <MappingContextProvider>\n        <MappingContainer\n          title=\"Response\"\n          required=\"source\"\n          strict={strictEnabled}\n          mappingPairs={responseMappingPairs}\n          onMappingPairsChange={setUpdatedResponseMappingPairs}\n          addMappingInterceptor={handleAddResponseMappingPair}\n          sourceSchema={sourceResponseSchema}\n          targetSchema={targetResponseSchema}\n        />\n      </MappingContextProvider>\n\n      {/* Testing */}\n      <MappingTest\n        requestMappingPairs={updatedRequestMappingPairs}\n        responseMappingPairs={updatedResponseMappingPairs}\n        sourceRequestSchema={sourceRequestSchema}\n        targetOperations={targetOperations}\n      />\n\n      {/* Bottom bar */}\n      <ActionBar\n        adapterCreating={adapterCreating}\n        saving={saving}\n        mappingValid={isValid}\n        strict={strictEnabled}\n        toggleStrict={() => setStrictEnabled((curr) => !curr)}\n        onClear={handleClear}\n        onSave={handleSaveMapping}\n        onCreateAdapter={handleCreateAdapter}\n      />\n    </div>\n  );\n}\n\n// #region Single Operation selection\ninterface SingleSelectionProps {\n  apiOptions: ApiOption[];\n  operation: Partial<OpenApiOperation> | undefined;\n  setOperation: (operation?: Partial<OpenApiOperation>) => void;\n  sourceOperation?: OpenApiOperation;\n}\nfunction SingleSelection(props: SingleSelectionProps) {\n  const { operation, setOperation, apiOptions, sourceOperation } = props;\n\n  const [loading, setLoading] = useState<boolean>(false);\n\n  // #region Selected parts\n  const [selectedApi, setSelectedApi] = useState<OpenApiModel>();\n  const [selectedOperation, setSelectedOperation] = useState<string>();\n  const [selectedResponse, setSelectedResponse] = useState<string>();\n  // #endregion\n\n  // #region Selection states\n  const [selectedApiOption, setSelectedApiOption] = useState<ApiOption | null>(\n    null,\n  );\n  const [\n    selectedOperationOption,\n    setSelectedOperationOption,\n  ] = useState<OperationOption | null>(null);\n  const [\n    selectedResponseOption,\n    setSelectedResponseOption,\n  ] = useState<ResponseOption | null>(null);\n  // #endregion\n\n  // #region Selection options\n  const [operationOptions, setOperationOptions] = useState<OperationOption[]>(\n    [],\n  );\n  const [responseOptions, setResponseOptions] = useState<ResponseOption[]>([]);\n  // #endregion\n\n  // #region Load options\n  const loadFullApi = useCallback(async (apiId: string): Promise<\n    OpenApiModel | undefined\n  > => {\n    try {\n      const apiData = await getApi<OpenApiModel>(apiId, false);\n      apiData.apiObject = await parseApiSpec(apiData.apiSpec);\n\n      return apiData;\n    } catch (err) {\n      console.log(err);\n      return undefined;\n    }\n  }, []);\n\n  const loadOperationOptions = useCallback(\n    async (api: OpenApiModel, srcOperation?: OpenApiOperation) => {\n      if (!api.apiObject) {\n        return [];\n      }\n\n      let mappedOperations: MappedOperations = [];\n      if (srcOperation) {\n        mappedOperations = await getMappedOperations(\n          ApiType.OPEN_API,\n          getId(srcOperation),\n          api.id,\n        );\n      }\n\n      const operationIds = getOperationIds(api.apiObject);\n      const options = operationIds\n        .map((operationId) => {\n          const alreadyMapped = mappedOperations.some(\n            (op) => op.operationId === operationId,\n          );\n\n          return {\n            alreadyMapped,\n            operationId,\n          };\n        })\n        .sort((a, b) => {\n          if (a.alreadyMapped && !b.alreadyMapped) {\n            return -1;\n          }\n\n          if (!a.alreadyMapped && b.alreadyMapped) {\n            return 1;\n          }\n\n          return 0;\n        })\n        .map<OperationOption>(({ alreadyMapped, operationId }) => {\n          return {\n            label: `${alreadyMapped ? '* ' : ''}${operationId}`,\n            value: { operationId },\n          };\n        });\n\n      return options;\n    },\n    [],\n  );\n\n  const loadResponseOptions = useCallback(\n    (api: OpenApiModel, operationId: string) => {\n      if (!api.apiObject) {\n        return [];\n      }\n\n      const responseCodes = getResponseCodes(api.apiObject, operationId);\n      const options = responseCodes.map<ResponseOption>((responseCode) => ({\n        label: responseCode,\n        value: { responseId: responseCode },\n      }));\n\n      return options;\n    },\n    [],\n  );\n  // #endregion\n\n  // #region Handle operation prop change\n  useEffect(() => {\n    async function initialize() {\n      setLoading(true);\n\n      if (!operation) {\n        setSelectedApi(undefined);\n        setSelectedApiOption(null);\n\n        setSelectedOperation(undefined);\n        setOperationOptions([]);\n        setSelectedOperationOption(null);\n\n        setSelectedResponse(undefined);\n        setResponseOptions([]);\n        setSelectedResponseOption(null);\n\n        setLoading(false);\n        return;\n      }\n\n      let api = selectedApi;\n      let operOptions: OperationOption[] = operationOptions;\n      let respOptions: ResponseOption[] = responseOptions;\n\n      if (selectedApi !== operation.api) {\n        const apiOption = apiOptions.find(\n          (option) => option.value.id === operation.api?.id,\n        );\n        api = apiOption && (await loadFullApi(apiOption.value.id));\n\n        setSelectedApi(api);\n        setSelectedApiOption(apiOption ?? null);\n        operOptions = api ? await loadOperationOptions(api) : [];\n        setOperationOptions(operOptions);\n      }\n\n      if (selectedOperation !== operation.operationId) {\n        const operationOption = operOptions.find(\n          (option) => option.value.operationId === operation.operationId,\n        );\n\n        setSelectedOperation(operation.operationId);\n        setSelectedOperationOption(operationOption ?? null);\n        respOptions =\n          api && operation.operationId\n            ? await loadResponseOptions(api, operation.operationId)\n            : [];\n        setResponseOptions(respOptions);\n      }\n\n      if (selectedResponse !== operation.responseId) {\n        const responseOption = respOptions.find(\n          (option) => option.value.responseId === operation.responseId,\n        );\n\n        setSelectedResponse(operation.responseId);\n        setSelectedResponseOption(responseOption ?? null);\n      }\n\n      setLoading(false);\n    }\n\n    initialize();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [operation]);\n  // #endregion\n\n  // #region Handle manual api change\n  useEffect(() => {\n    if (loading) {\n      return;\n    }\n\n    // Reset other selections\n    setSelectedOperationOption(null);\n    setSelectedResponseOption(null);\n\n    if (selectedApiOption) {\n      loadFullApi(selectedApiOption?.value.id).then(setSelectedApi);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedApiOption]);\n\n  useEffect(() => {\n    if (loading) {\n      return;\n    }\n\n    if (selectedApi) {\n      loadOperationOptions(selectedApi, sourceOperation).then(\n        setOperationOptions,\n      );\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [sourceOperation, selectedApi]);\n  // #endregion\n\n  // #region Handle manual operation change\n  useEffect(() => {\n    if (loading) {\n      return;\n    }\n\n    // Reset other selections\n    setSelectedResponseOption(null);\n\n    setSelectedOperation(selectedOperationOption?.value.operationId);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedOperationOption]);\n\n  useEffect(() => {\n    if (loading) {\n      return;\n    }\n\n    if (selectedApi && selectedOperation) {\n      const options = loadResponseOptions(selectedApi, selectedOperation);\n      setResponseOptions(options);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedOperation]);\n  // #endregion\n\n  // #region Handle manual response change\n  useEffect(() => {\n    if (loading) {\n      return;\n    }\n\n    setSelectedResponse(selectedResponseOption?.value.responseId);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedResponseOption]);\n  // #endregion\n\n  // #region Emit changed operation\n  useEffect(() => {\n    if (loading) {\n      return;\n    }\n\n    if (!selectedApi && !selectedOperation && !selectedResponse) {\n      setOperation(undefined);\n      return;\n    }\n\n    setOperation({\n      api: selectedApi,\n      operationId: selectedOperation,\n      responseId: selectedResponse,\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedApi, selectedOperation, selectedResponse]);\n  // #endregion\n\n  return (\n    <div className=\"flex flex-col\">\n      <Select\n        className=\"w-full\"\n        value={selectedApiOption}\n        isSearchable\n        isClearable\n        onChange={(value) => setSelectedApiOption(value ?? null)}\n        options={apiOptions}\n        filterOption={optionFilter}\n      />\n      <div className=\"w-full flex mt-2\">\n        <Select\n          className=\"w-full\"\n          value={selectedOperationOption}\n          isSearchable\n          onChange={(value) => setSelectedOperationOption(value ?? null)}\n          options={operationOptions}\n        />\n        <Select\n          className=\"ml-2 w-1/3\"\n          value={selectedResponseOption}\n          isSearchable\n          onChange={(value) => setSelectedResponseOption(value ?? null)}\n          options={responseOptions}\n        />\n      </div>\n    </div>\n  );\n}\n// #endregion\n\n// #region Multi Operation Selection\ninterface MultiSelectionProps {\n  apiOptions: ApiOption[];\n  operations: Record<string, OpenApiOperation> | undefined;\n  setOperations: React.Dispatch<\n    React.SetStateAction<Record<string, OpenApiOperation> | undefined>\n  >;\n  sourceOperation?: OpenApiOperation;\n}\nfunction MultiSelection(props: MultiSelectionProps) {\n  const { apiOptions, operations, setOperations, sourceOperation } = props;\n\n  // #region Selection & update management\n  const [\n    selectedOperation,\n    setSelectedOperation,\n  ] = useState<OpenApiOperation>();\n  const [partialSelectedOperation, setPartialSelectedOperation] = useState<\n    Partial<OpenApiOperation>\n  >();\n\n  useEffect(() => {\n    if (\n      !isValidOperation(partialSelectedOperation) ||\n      operationEquals(partialSelectedOperation, selectedOperation)\n    ) {\n      return;\n    }\n\n    if (selectedOperation === undefined) {\n      addOperation(partialSelectedOperation);\n      return;\n    }\n\n    replaceOperation(selectedOperation, partialSelectedOperation);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [partialSelectedOperation]);\n  // #endregion\n\n  // #region Manage operations\n  const addOperation = useCallback(\n    (operation: OpenApiOperation) => {\n      setOperations((currentOperations) => ({\n        ...currentOperations,\n        [getId(operation)]: operation,\n      }));\n\n      setSelectedOperation(operation);\n      setPartialSelectedOperation(operation);\n    },\n    [setOperations],\n  );\n\n  const replaceOperation = useCallback(\n    (oldOperation: OpenApiOperation, newOperation: OpenApiOperation) => {\n      setOperations((currentOperations) => {\n        if (!currentOperations) {\n          return undefined;\n        }\n\n        return Object.entries(currentOperations).reduce(\n          (newOperations, [id, operation]) => {\n            if (getId(oldOperation) === id) {\n              return {\n                ...newOperations,\n                [getId(newOperation)]: newOperation,\n              };\n            }\n\n            return {\n              ...newOperations,\n              [id]: operation,\n            };\n          },\n          {},\n        );\n      });\n\n      setSelectedOperation(newOperation);\n      setPartialSelectedOperation(newOperation);\n    },\n    [setOperations],\n  );\n\n  const removeOperation = useCallback(\n    (operation: OpenApiOperation) => {\n      setOperations((currentOperations) => {\n        const { [getId(operation)]: deleted, ...rest } =\n          currentOperations ?? {};\n\n        return rest;\n      });\n\n      if (selectedOperation === operation) {\n        setSelectedOperation(undefined);\n        setPartialSelectedOperation(undefined);\n      }\n    },\n    [setOperations, selectedOperation, setSelectedOperation],\n  );\n  // #endregion\n\n  // #region Handle clear\n  useEffect(() => {\n    if (!operations) {\n      setSelectedOperation(undefined);\n      setPartialSelectedOperation(undefined);\n    }\n  }, [operations]);\n  // #endregion\n\n  return (\n    <div className=\"flex flex-col\">\n      <div className=\"flex overflow-x-auto\">\n        {operations &&\n          Object.values(operations).map((operation) => (\n            <button\n              key={getId(operation)}\n              type=\"button\"\n              className=\"chip mx-1\"\n              onClick={() => {\n                setSelectedOperation(operation);\n                setPartialSelectedOperation(operation);\n              }}\n            >\n              {operation.api.name}\n              <div className=\"border-l ml-2 pl-2 flex items-center\">\n                <ClearIcon\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    removeOperation(operation);\n                  }}\n                  className=\"h-4 w-4\"\n                />\n              </div>\n            </button>\n          ))}\n        <button\n          type=\"button\"\n          className=\"chip border-dashed mx-1 h-8\"\n          onClick={() => {\n            setSelectedOperation(undefined);\n            setPartialSelectedOperation(undefined);\n          }}\n        >\n          <AddIcon className=\"h-4 w-4\" />\n        </button>\n      </div>\n      <div className=\"mt-2\">\n        <SingleSelection\n          key=\"default\"\n          apiOptions={apiOptions}\n          operation={partialSelectedOperation}\n          setOperation={setPartialSelectedOperation}\n          sourceOperation={sourceOperation}\n        />\n      </div>\n    </div>\n  );\n}\n// #endregion\n\n// #region Helper\nfunction getId(operation?: OpenApiOperation): string {\n  if (!operation) {\n    return '';\n  }\n  return `${operation.api.id}_${operation.operationId}_${operation.responseId}`;\n}\n\nfunction isValidOperation(\n  operation: Partial<OpenApiOperation> | undefined,\n): operation is OpenApiOperation {\n  return (\n    operation !== undefined &&\n    operation.api !== undefined &&\n    operation.operationId !== undefined &&\n    operation.responseId !== undefined\n  );\n}\n\nfunction operationEquals(a?: OpenApiOperation, b?: OpenApiOperation) {\n  return (\n    a !== undefined &&\n    b !== undefined &&\n    a.api.id === b.api.id &&\n    a.operationId === b.operationId &&\n    a.responseId === b.responseId\n  );\n}\n// #endregion\n\nexport default OpenApiMappingCreator;\n","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/pages/AsyncApiMappingCreator.tsx",["318","319","320","321"],"/* eslint-disable @typescript-eslint/no-use-before-define */\nimport MappingContainer from 'components/MappingContainer';\nimport { MappingContextProvider } from 'contexts/MappingContext';\nimport { ApiType, AsyncApiModel } from 'models/ApiModel';\nimport {\n  AsyncApiMappingModel,\n  MappingDirection,\n  MappingPair,\n  MappingType,\n} from 'models/MappingModel';\nimport React, {\n  ReactElement,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from 'react';\nimport { getApi, getApis } from 'services/apiservice';\nimport { AuthContext } from 'services/auth/authcontext';\nimport {\n  createMapping,\n  generateMapping,\n  getMappedOperations,\n  MappedOperations,\n  pairs2Trans,\n  recomputeAttributeMapping,\n} from 'services/mappingservice';\nimport {\n  ApiOption,\n  OperationOption,\n  optionFilter,\n} from 'utils/helpers/apiSelection';\nimport { flatten } from 'flat';\nimport generateAdapter from 'services/adapterservice';\nimport downloadFile from 'utils/helpers/download';\nimport InfoModal from 'components/InfoModal';\nimport ActionBar from 'components/ActionBar';\nimport {\n  AsyncApiOperation,\n  getMessageSchema,\n  getOperationIds,\n  parseApiSpec,\n} from 'utils/helpers/asyncApiParser';\nimport { Schema } from 'utils/helpers/schemaHelpers';\nimport Select from 'react-select';\nimport ClearIcon from 'components/Icons/ClearIcon';\nimport AddIcon from 'components/Icons/AddIcon';\nimport CheckIcon from 'components/Icons/CheckIcon';\nimport {\n  clusterMappingPairs,\n  computeMessageMapping,\n} from 'utils/helpers/mappingHelpers';\n\nfunction AsyncApiMappingCreator(): ReactElement {\n  const { authState } = useContext(AuthContext);\n\n  const [error, setError] = useState<string>();\n\n  // #region Mapping direction\n  // In AsyncApi, we need to explicitly say which side will be required and which will be provided\n  // because it depends on the type of operation. Hence, this value determines whether the source\n  // is considered as in INPUT (i.e. source is required, source only shows publish operations, this\n  // might seem weird but according to the docs [https://www.asyncapi.com/docs/getting-started/hello-world]\n  // if an operation is marked as 'publish', it means that OTHERS can publish to it and the source subscribed)\n  // or as an OUTPUT (i.e. target is required, source only shows subscribe operations)\n\n  const [mappingDirection, setMappingDirection] = useState<MappingDirection>(\n    MappingDirection.INPUT,\n  );\n\n  const toggleDirection = useCallback(() => {\n    setMappingDirection((currentDirection) => {\n      if (currentDirection === MappingDirection.INPUT) {\n        return MappingDirection.OUTPUT;\n      }\n\n      return MappingDirection.INPUT;\n    });\n  }, []);\n  // #endregion\n\n  // #region Load Apis\n  const [apiOptions, setApiOptions] = useState<ApiOption[]>([]);\n\n  const loadApis = useCallback(async (type: ApiType) => {\n    try {\n      const loadedApis = await getApis(type, true);\n\n      setApiOptions(\n        loadedApis.map((api) => ({\n          value: api,\n          label: api.name,\n        })),\n      );\n    } catch (err) {\n      console.log('Error loading apis', err);\n    }\n  }, []);\n\n  useEffect(() => {\n    loadApis(ApiType.ASYNC_API);\n  }, [loadApis]);\n  // #endregion\n\n  // #region Operation selections\n  const [partialSourceOperation, setPartialSourceOperation] = useState<\n    Partial<AsyncApiOperation>\n  >();\n  const sourceOperation = useMemo<AsyncApiOperation | undefined>(() => {\n    if (isValidOperation(partialSourceOperation)) {\n      return partialSourceOperation;\n    }\n\n    return undefined;\n  }, [partialSourceOperation]);\n\n  const [targetOperations, setTargetOperations] = useState<\n    Record<string, AsyncApiOperation>\n  >();\n\n  const sourceMessageSchema = useMemo<Record<string, Schema>>(() => {\n    if (!sourceOperation || !sourceOperation.api.apiObject) {\n      return {};\n    }\n\n    const messageSchema = {\n      [getId(sourceOperation)]:\n        getMessageSchema(\n          sourceOperation.api.apiObject,\n          sourceOperation.operationId,\n        ) ?? {},\n    };\n\n    return messageSchema;\n  }, [sourceOperation]);\n\n  const targetMessageSchema = useMemo<Record<string, Schema>>(() => {\n    if (!targetOperations) {\n      return {};\n    }\n\n    return Object.entries(targetOperations).reduce<Record<string, Schema>>(\n      (messageSchema, [key, operation]) => {\n        const { api, operationId } = operation;\n\n        if (!api.apiObject) {\n          return messageSchema;\n        }\n\n        const schema = getMessageSchema(api.apiObject, operationId);\n\n        if (!schema) {\n          return messageSchema;\n        }\n\n        return {\n          ...messageSchema,\n          [key]: schema,\n        };\n      },\n      {},\n    );\n  }, [targetOperations]);\n  // #endregion\n\n  // #region Mapping pairs\n  const [messageMappingPairs, setMessageMappingPairs] = useState<MappingPair[]>(\n    [],\n  );\n\n  const [updatedMessageMappingPairs, setUpdatedMessageMappingPairs] = useState<\n    MappingPair[]\n  >([]);\n  // #endregion\n\n  // #region Mapping initialization\n  useEffect(() => {\n    async function initializeMapping() {\n      if (!sourceOperation || !targetOperations) {\n        return;\n      }\n\n      const mappingResult = await generateMapping(\n        sourceOperation,\n        targetOperations,\n        mappingDirection,\n      );\n\n      setMessageMappingPairs(mappingResult.mappingPairs);\n    }\n\n    initializeMapping();\n  }, [sourceOperation, targetOperations, mappingDirection]);\n  // #endregion\n\n  // #region Attribute mapping recomputation\n  const handleAddMappingPair = useCallback(async () => {\n    if (!sourceOperation || !targetOperations) {\n      return [];\n    }\n\n    const result = await recomputeAttributeMapping(\n      sourceOperation,\n      targetOperations,\n      messageMappingPairs,\n      mappingDirection,\n    );\n\n    return result.mappingPairs;\n  }, [\n    messageMappingPairs,\n    sourceOperation,\n    targetOperations,\n    mappingDirection,\n  ]);\n  // #endregion\n\n  // #region Strict mode\n  const [strictEnabled, setStrictEnabled] = useState<boolean>(true);\n  // #endregion\n\n  // #region Determine current mapping validity\n  const isValid = useMemo(() => {\n    if (!targetMessageSchema || !sourceMessageSchema) {\n      return false;\n    }\n\n    if (\n      updatedMessageMappingPairs.some(\n        (mappingPair) => !mappingPair.mappingTransformation,\n      )\n    ) {\n      return false;\n    }\n\n    const clusteredMappingPairs = clusterMappingPairs(\n      updatedMessageMappingPairs,\n      mappingDirection,\n    );\n\n    const valid = Object.keys(targetMessageSchema).every((targetId) => {\n      // Check for every target\n      const flatRequiredSchema = Object.keys(\n        flatten(\n          mappingDirection === MappingDirection.INPUT\n            ? sourceMessageSchema\n            : { [targetId]: targetMessageSchema[targetId] }, // Extract a single target\n        ),\n      );\n      const flatMapping = Object.keys(\n        flatten(pairs2Trans(clusteredMappingPairs[targetId] ?? [])),\n      );\n\n      const missing = flatRequiredSchema.filter(\n        (attributeId) => !flatMapping.includes(attributeId),\n      );\n\n      return missing.length === 0;\n    });\n\n    return valid;\n  }, [\n    sourceMessageSchema,\n    targetMessageSchema,\n    updatedMessageMappingPairs,\n    mappingDirection,\n  ]);\n  // #endregion\n\n  // #region Interaction handlers\n  const handleClear = useCallback(() => {\n    setPartialSourceOperation(undefined);\n    setTargetOperations(undefined);\n    setMessageMappingPairs([]);\n  }, []);\n\n  const [saving, setSaving] = useState<boolean>(false);\n  const handleSaveMapping = useCallback(async () => {\n    if (\n      !isValid ||\n      !strictEnabled ||\n      !authState.user?.id ||\n      !sourceOperation ||\n      !targetOperations\n    ) {\n      return;\n    }\n\n    setSaving(true);\n\n    const mapping: AsyncApiMappingModel = {\n      apiType: ApiType.ASYNC_API,\n      type: MappingType.TRANSFORMATION,\n      createdBy: authState.user.id,\n      sourceId: getId(sourceOperation),\n      targetIds: Object.keys(targetOperations),\n      direction: mappingDirection,\n      messageMappings: computeMessageMapping(\n        updatedMessageMappingPairs,\n        mappingDirection,\n      ),\n    };\n\n    try {\n      await createMapping(mapping);\n    } catch (err) {\n      console.log(err);\n      setError('An error occurred');\n    } finally {\n      setSaving(false);\n      handleClear();\n    }\n  }, [\n    isValid,\n    strictEnabled,\n    authState.user,\n    sourceOperation,\n    handleClear,\n    targetOperations,\n    updatedMessageMappingPairs,\n    mappingDirection,\n  ]);\n\n  const [adapterCreating, setAdapterCreating] = useState<boolean>(false);\n  const handleCreateAdapter = useCallback(async () => {\n    if (!authState.user?.id || !sourceOperation || !targetOperations) {\n      return;\n    }\n\n    setAdapterCreating(true);\n\n    const mapping: AsyncApiMappingModel = {\n      apiType: ApiType.ASYNC_API,\n      type: MappingType.TRANSFORMATION,\n      createdBy: authState.user.id,\n      sourceId: getId(sourceOperation),\n      targetIds: Object.keys(targetOperations),\n      direction: mappingDirection,\n      messageMappings: computeMessageMapping(\n        updatedMessageMappingPairs,\n        mappingDirection,\n      ),\n    };\n\n    try {\n      const downloadLink = await generateAdapter(mapping, 'javascript');\n\n      downloadFile(downloadLink, 'adapter.zip');\n    } catch (err) {\n      console.log(err);\n      setError('An error occurred');\n    } finally {\n      setAdapterCreating(false);\n    }\n  }, [\n    authState,\n    sourceOperation,\n    targetOperations,\n    mappingDirection,\n    updatedMessageMappingPairs,\n  ]);\n  // #endregion\n\n  return (\n    <div className=\"w-11/12 flex flex-col pb-8\">\n      <InfoModal\n        isOpen={error !== undefined}\n        onDismiss={() => setError(undefined)}\n        header=\"Error\"\n        message={error ?? ''}\n      />\n\n      {/* API selection */}\n      <div className=\"flex -mx-1\">\n        <div className=\"w-1/2 px-1 flex flex-col justify-between\">\n          <p className=\"font-bold\">Source</p>\n          <div>\n            <label htmlFor=\"cbx-direction\" className=\"flex\">\n              <div className=\"w-6 h-6 mr-2 rounded border\">\n                {mappingDirection === MappingDirection.INPUT && (\n                  <CheckIcon className=\"w-6 h-6\" />\n                )}\n              </div>\n              Publish Operations (Source is required)\n              <input\n                id=\"cbx-direction\"\n                type=\"checkbox\"\n                className=\"hidden\"\n                checked={mappingDirection === MappingDirection.INPUT}\n                readOnly\n                onClick={toggleDirection}\n              />\n            </label>\n          </div>\n          <SingleSelection\n            operationType={\n              mappingDirection === MappingDirection.INPUT\n                ? 'publish'\n                : 'subscribe'\n            }\n            apiOptions={apiOptions}\n            operation={partialSourceOperation}\n            setOperation={setPartialSourceOperation}\n          />\n        </div>\n        <div className=\"w-1/2 px-1 flex flex-col\">\n          <p className=\"font-bold\">Targets</p>\n          <MultiSelection\n            operationType={\n              mappingDirection === MappingDirection.INPUT\n                ? 'publish'\n                : 'subscribe'\n            }\n            apiOptions={apiOptions}\n            operations={targetOperations}\n            setOperations={setTargetOperations}\n            sourceOperation={sourceOperation}\n          />\n        </div>\n      </div>\n\n      {/* Message */}\n      <MappingContextProvider>\n        <MappingContainer\n          title=\"Request\"\n          required={\n            mappingDirection === MappingDirection.INPUT ? 'source' : 'target'\n          }\n          strict={strictEnabled}\n          mappingPairs={messageMappingPairs}\n          onMappingPairsChange={setUpdatedMessageMappingPairs}\n          addMappingInterceptor={handleAddMappingPair}\n          noMixed\n          allowMultiMapping\n          // If the target side is the provided side, require a selection in order\n          // to be able to differentiate where a static value mapping belongs to\n          requireProvided={mappingDirection === MappingDirection.INPUT}\n          sourceSchema={sourceMessageSchema}\n          targetSchema={targetMessageSchema}\n        />\n      </MappingContextProvider>\n\n      {/* Testing */}\n\n      {/* Bottom bar */}\n      <ActionBar\n        adapterCreating={adapterCreating}\n        saving={saving}\n        mappingValid={isValid}\n        strict={strictEnabled}\n        toggleStrict={() => setStrictEnabled((curr) => !curr)}\n        onClear={handleClear}\n        onSave={handleSaveMapping}\n        onCreateAdapter={handleCreateAdapter}\n      />\n    </div>\n  );\n}\n\n// #region Single Operation selection\ninterface SingleSelectionProps {\n  operationType: 'publish' | 'subscribe';\n  apiOptions: ApiOption[];\n  operation: Partial<AsyncApiOperation> | undefined;\n  setOperation: (operation?: Partial<AsyncApiOperation>) => void;\n  sourceOperation?: AsyncApiOperation;\n}\nfunction SingleSelection(props: SingleSelectionProps) {\n  const {\n    operationType,\n    operation,\n    setOperation,\n    apiOptions,\n    sourceOperation,\n  } = props;\n\n  const [loading, setLoading] = useState<boolean>(false);\n\n  // #region Selected parts\n  const [selectedApi, setSelectedApi] = useState<AsyncApiModel>();\n  const [selectedOperation, setSelectedOperation] = useState<string>();\n  // #endregion\n\n  // #region Selection states\n  const [selectedApiOption, setSelectedApiOption] = useState<ApiOption | null>(\n    null,\n  );\n  const [\n    selectedOperationOption,\n    setSelectedOperationOption,\n  ] = useState<OperationOption | null>(null);\n  // #endregion\n\n  // #region Selection options\n  const [operationOptions, setOperationOptions] = useState<OperationOption[]>(\n    [],\n  );\n  // #endregion\n\n  // #region Load options\n  const loadFullApi = useCallback(async (apiId: string) => {\n    try {\n      const apiData = await getApi<AsyncApiModel>(apiId, false);\n      apiData.apiObject = await parseApiSpec(apiData.apiSpec);\n\n      return apiData;\n    } catch (err) {\n      console.log(err);\n      return undefined;\n    }\n  }, []);\n\n  const loadOperationOptions = useCallback(\n    async (api: AsyncApiModel, srcOperation?: AsyncApiOperation) => {\n      if (!api.apiObject) {\n        return [];\n      }\n\n      let mappedOperations: MappedOperations = [];\n      if (srcOperation) {\n        mappedOperations = await getMappedOperations(\n          ApiType.ASYNC_API,\n          getId(srcOperation),\n          api.id,\n        );\n      }\n\n      const operationIds = getOperationIds(api.apiObject, operationType);\n      const options = operationIds\n        .map((operationId) => {\n          const alreadyMapped = mappedOperations.some(\n            (op) => op.operationId === operationId,\n          );\n\n          return {\n            alreadyMapped,\n            operationId,\n          };\n        })\n        .sort((a, b) => {\n          if (a.alreadyMapped && !b.alreadyMapped) {\n            return -1;\n          }\n\n          if (!a.alreadyMapped && b.alreadyMapped) {\n            return 1;\n          }\n\n          return 0;\n        })\n        .map<OperationOption>(({ alreadyMapped, operationId }) => {\n          return {\n            label: `${alreadyMapped ? '* ' : ''}${operationId}`,\n            value: { operationId },\n          };\n        });\n\n      return options;\n    },\n    [operationType],\n  );\n\n  useEffect(() => {\n    setSelectedOperationOption(null);\n  }, [operationType]);\n  // #endregion\n\n  // #region Handle operation prop change\n  useEffect(() => {\n    async function initialize() {\n      setLoading(true);\n\n      if (!operation) {\n        setSelectedApi(undefined);\n        setSelectedApiOption(null);\n\n        setSelectedOperation(undefined);\n        setOperationOptions([]);\n        setSelectedOperationOption(null);\n\n        setLoading(false);\n        return;\n      }\n\n      let api = selectedApi;\n      let operOptions: OperationOption[] = operationOptions;\n\n      if (selectedApi !== operation.api) {\n        const apiOption = apiOptions.find(\n          (option) => option.value.id === operation.api?.id,\n        );\n        api = apiOption && (await loadFullApi(apiOption.value.id));\n\n        setSelectedApi(api);\n        setSelectedApiOption(apiOption ?? null);\n        operOptions = api ? await loadOperationOptions(api) : [];\n        setOperationOptions(operOptions);\n      }\n\n      if (selectedOperation !== operation.operationId) {\n        const operationOption = operOptions.find(\n          (option) => option.value.operationId === operation.operationId,\n        );\n\n        setSelectedOperation(operation.operationId);\n        setSelectedOperationOption(operationOption ?? null);\n      }\n\n      setLoading(false);\n    }\n\n    initialize();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [operation]);\n  // #endregion\n\n  // #region Handle manual api change\n  useEffect(() => {\n    if (loading) {\n      return;\n    }\n\n    // Reset other selections\n    setSelectedOperationOption(null);\n\n    if (selectedApiOption) {\n      loadFullApi(selectedApiOption?.value.id).then(setSelectedApi);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedApiOption]);\n\n  useEffect(() => {\n    if (loading) {\n      return;\n    }\n\n    if (selectedApi) {\n      loadOperationOptions(selectedApi, sourceOperation).then(\n        setOperationOptions,\n      );\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [sourceOperation, selectedApi, operationType]);\n  // #endregion\n\n  // #region Handle manual operation change\n  useEffect(() => {\n    if (loading) {\n      return;\n    }\n\n    setSelectedOperation(selectedOperationOption?.value.operationId);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedOperationOption]);\n  // #endregion\n\n  // #region Emit changed operation\n  useEffect(() => {\n    if (loading) {\n      return;\n    }\n\n    if (!selectedApi && !selectedOperation) {\n      setOperation(undefined);\n      return;\n    }\n\n    setOperation({\n      api: selectedApi,\n      operationId: selectedOperation,\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedApi, selectedOperation]);\n  // #endregion\n\n  return (\n    <div className=\"flex flex-col\">\n      <Select\n        className=\"w-full\"\n        value={selectedApiOption}\n        isSearchable\n        isClearable\n        onChange={(value) => setSelectedApiOption(value ?? null)}\n        options={apiOptions}\n        filterOption={optionFilter}\n      />\n      <Select\n        className=\"w-full mt-2\"\n        value={selectedOperationOption}\n        isSearchable\n        onChange={(value) => setSelectedOperationOption(value ?? null)}\n        options={operationOptions}\n      />\n    </div>\n  );\n}\n// #endregion\n\n// #region Multi Operation Selection\ninterface MultiSelectionProps {\n  operationType: 'publish' | 'subscribe';\n  apiOptions: ApiOption[];\n  operations: Record<string, AsyncApiOperation> | undefined;\n  setOperations: React.Dispatch<\n    React.SetStateAction<Record<string, AsyncApiOperation> | undefined>\n  >;\n  sourceOperation?: AsyncApiOperation;\n}\nfunction MultiSelection(props: MultiSelectionProps) {\n  const {\n    operationType,\n    apiOptions,\n    operations,\n    setOperations,\n    sourceOperation,\n  } = props;\n\n  // #region Selection & update management\n  const [\n    selectedOperation,\n    setSelectedOperation,\n  ] = useState<AsyncApiOperation>();\n  const [partialSelectedOperation, setPartialSelectedOperation] = useState<\n    Partial<AsyncApiOperation>\n  >();\n\n  useEffect(() => {\n    if (\n      !isValidOperation(partialSelectedOperation) ||\n      operationEquals(partialSelectedOperation, selectedOperation)\n    ) {\n      return;\n    }\n\n    if (selectedOperation === undefined) {\n      addOperation(partialSelectedOperation);\n      return;\n    }\n\n    replaceOperation(selectedOperation, partialSelectedOperation);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [partialSelectedOperation]);\n  // #endregion\n\n  // #region Manage operations\n  const addOperation = useCallback(\n    (operation: AsyncApiOperation) => {\n      setOperations((currentOperations) => ({\n        ...currentOperations,\n        [getId(operation)]: operation,\n      }));\n\n      setSelectedOperation(operation);\n      setPartialSelectedOperation(operation);\n    },\n    [setOperations],\n  );\n\n  const replaceOperation = useCallback(\n    (oldOperation: AsyncApiOperation, newOperation: AsyncApiOperation) => {\n      setOperations((currentOperations) => {\n        if (!currentOperations) {\n          return undefined;\n        }\n\n        return Object.entries(currentOperations).reduce(\n          (newOperations, [id, operation]) => {\n            if (getId(oldOperation) === id) {\n              return {\n                ...newOperations,\n                [getId(newOperation)]: newOperation,\n              };\n            }\n\n            return {\n              ...newOperations,\n              [id]: operation,\n            };\n          },\n          {},\n        );\n      });\n\n      setSelectedOperation(newOperation);\n      setPartialSelectedOperation(newOperation);\n    },\n    [setOperations],\n  );\n\n  const removeOperation = useCallback(\n    (operation: AsyncApiOperation) => {\n      setOperations((currentOperations) => {\n        const { [getId(operation)]: deleted, ...rest } =\n          currentOperations ?? {};\n\n        return rest;\n      });\n\n      if (selectedOperation === operation) {\n        setSelectedOperation(undefined);\n        setPartialSelectedOperation(undefined);\n      }\n    },\n    [setOperations, selectedOperation, setSelectedOperation],\n  );\n  // #endregion\n\n  // #region Handle clear\n  useEffect(() => {\n    if (!operations) {\n      setSelectedOperation(undefined);\n      setPartialSelectedOperation(undefined);\n    }\n  }, [operations]);\n  // #endregion\n\n  return (\n    <div className=\"flex flex-col\">\n      <div className=\"flex overflow-x-auto\">\n        {operations &&\n          Object.values(operations).map((operation) => (\n            <button\n              key={getId(operation)}\n              type=\"button\"\n              className=\"chip mx-1\"\n              onClick={() => {\n                setSelectedOperation(operation);\n                setPartialSelectedOperation(operation);\n              }}\n            >\n              {operation.api.name}\n              <div className=\"border-l ml-2 pl-2 flex items-center\">\n                <ClearIcon\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    removeOperation(operation);\n                  }}\n                  className=\"h-4 w-4\"\n                />\n              </div>\n            </button>\n          ))}\n        <button\n          type=\"button\"\n          className=\"chip border-dashed mx-1 h-8\"\n          onClick={() => {\n            setSelectedOperation(undefined);\n            setPartialSelectedOperation(undefined);\n          }}\n        >\n          <AddIcon className=\"h-4 w-4\" />\n        </button>\n      </div>\n      <div className=\"mt-2\">\n        <SingleSelection\n          operationType={operationType}\n          key=\"default\"\n          apiOptions={apiOptions}\n          operation={partialSelectedOperation}\n          setOperation={setPartialSelectedOperation}\n          sourceOperation={sourceOperation}\n        />\n      </div>\n    </div>\n  );\n}\n// #endregion\n\n// #region Helper\nfunction getId(operation?: AsyncApiOperation): string {\n  if (!operation) {\n    return '';\n  }\n  return `${operation.api.id}_${operation.operationId}`;\n}\n\nfunction isValidOperation(\n  operation: Partial<AsyncApiOperation> | undefined,\n): operation is AsyncApiOperation {\n  return (\n    operation !== undefined &&\n    operation.api !== undefined &&\n    operation.operationId !== undefined\n  );\n}\n\nfunction operationEquals(a?: AsyncApiOperation, b?: AsyncApiOperation) {\n  return (\n    a !== undefined &&\n    b !== undefined &&\n    a.api.id === b.api.id &&\n    a.operationId === b.operationId\n  );\n}\n// #endregion\n\nexport default AsyncApiMappingCreator;\n","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/asyncApiParser.ts",["322"],"import AsyncApiParser, {\n  AsyncAPIDocument,\n  Channel,\n  PublishOperation,\n  SubscribeOperation,\n} from '@asyncapi/parser';\nimport { AsyncApiModel } from 'models/ApiModel';\nimport { Schema, removeTypes, flattenSchema } from './schemaHelpers';\n\n// #region Types & constants\nexport type AsyncApiOperation = {\n  api: AsyncApiModel;\n  operationId: string;\n};\n\n// #endregion\n\nexport async function parseApiSpec(apiSpec: string): Promise<AsyncAPIDocument> {\n  return AsyncApiParser.parse(apiSpec);\n}\n\n// #region Get operations details\nfunction getOperation(\n  apiObject: AsyncAPIDocument,\n  operationId: string,\n  mode: 'publish' | 'subscribe' | 'any',\n):\n  | {\n      pathUrl: string;\n      channel: Channel;\n      operation: PublishOperation | SubscribeOperation;\n    }\n  | undefined {\n  const paths = apiObject.channelNames();\n\n  const operations = paths\n    .map((path) => ({\n      path,\n      channel: apiObject.channel(path),\n    }))\n    .flatMap(({ path, channel }) => {\n      const result = [];\n      if (mode !== 'subscribe' && channel.hasPublish()) {\n        result.push({\n          pathUrl: path,\n          channel,\n          operation: channel.publish(),\n        });\n      }\n      if (mode !== 'publish' && channel.hasSubscribe()) {\n        result.push({\n          pathUrl: path,\n          channel,\n          operation: channel.subscribe(),\n        });\n      }\n\n      return result;\n    });\n\n  return operations.find(({ operation }) => operation.id() === operationId);\n}\n\nexport function getOperationIds(\n  apiObject: AsyncApiParser.AsyncAPIDocument,\n  mode: 'publish' | 'subscribe' | 'any',\n): string[] {\n  return apiObject\n    .channelNames()\n    .map((path) => apiObject.channel(path))\n    .flatMap((channel) => {\n      const result = [];\n      if (mode !== 'subscribe' && channel.hasPublish()) {\n        result.push(channel.publish());\n      }\n\n      if (mode !== 'publish' && channel.hasSubscribe()) {\n        result.push(channel.subscribe());\n      }\n\n      return result;\n    })\n    .map((operation) => operation.id());\n}\n// #endregion\n\n// #region Get server details\nexport function getServers(apiObject: AsyncAPIDocument): string[] | undefined {\n  const servers = Object.values(apiObject.servers());\n\n  if (servers.length === 0) {\n    return undefined;\n  }\n\n  return servers.map((server) => {\n    return Object.entries(server.variables() || []).reduce(\n      (url, [varname, value]) =>\n        url.replace(new RegExp(`{${varname}}`, 'g'), value.defaultValue()),\n      server.url(),\n    );\n  });\n}\n// #endregion\n\n// #region Message Schema\nexport function getMessageSchema(\n  apiObject: AsyncAPIDocument,\n  operationId: string,\n): Schema | undefined {\n  const result = getOperation(apiObject, operationId, 'any');\n\n  if (result === undefined) {\n    return undefined;\n  }\n\n  const { channel, operation } = result;\n\n  const message = operation.message();\n\n  const parameters = Object.entries(channel.parameters()).reduce(\n    (params, [paramName, parameter]) => ({\n      ...params,\n      [paramName]: removeTypes(flattenSchema(parameter.json())),\n    }),\n    {},\n  );\n\n  const headerJSON = message.headers()?.json();\n  const headers = headerJSON ? removeTypes(flattenSchema(headerJSON)) : {};\n\n  const payloadJSON = message.payload()?.json();\n  const payload = payloadJSON ? removeTypes(flattenSchema(payloadJSON)) : {};\n\n  return {\n    ...(channel.hasParameters() ? { parameters } : null),\n    ...(Object.keys(headers).length > 0 ? { headers } : null),\n    ...(Object.keys(payload).length > 0 ? { payload } : null),\n  };\n}\n// #endregion\n\n// #region Request URL\nexport function getRequestUrl(\n  apiObject: AsyncAPIDocument,\n  operationId: string,\n  paramValues: Record<string, string> = {},\n): string | undefined {\n  const servers = getServers(apiObject);\n  const operationResult = getOperation(apiObject, operationId, 'any');\n  console.log(servers, apiObject, operationId, operationResult);\n\n  if (!servers || servers.length === 0 || !operationResult) {\n    return undefined;\n  }\n\n  const { pathUrl, channel } = operationResult;\n  const server = servers[0];\n\n  // Get all required parameters\n  const parameters = channel.hasParameters()\n    ? Object.keys(channel.parameters())\n    : [];\n\n  const urlWithParams = parameters.reduce(\n    (currUrl, currParam) =>\n      currUrl.replace(\n        new RegExp(`{${currParam}}`, 'g'),\n        paramValues[currParam] || '',\n      ),\n    pathUrl,\n  );\n\n  return `${server}${urlWithParams}`;\n}\n// #endregion\n","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/components/ActionBar.tsx",[],"/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/schemaHelpers.ts",["323","324","325","326","327","328","329"],"export type Schema =\n  | {\n      [key: string]: string | Schema;\n    }\n  | [Schema];\n\nexport function removeTypes(schema: any): Schema {\n  if (schema.type === 'object') {\n    return Object.entries(schema.properties).reduce(\n      (obj, [key, value]) => ({\n        ...obj,\n        [key]: removeTypes(value),\n      }),\n      {},\n    );\n  }\n\n  if (schema.type === 'array') {\n    return [removeTypes(schema.items)];\n  }\n\n  return schema.type;\n}\n\nexport function flattenSchema(schema: any): any {\n  if (schema.allOf !== undefined) {\n    const combinedObject = {\n      type: 'object',\n      properties: schema.allOf.reduce(\n        (obj: any, subSchema: any) => ({\n          ...obj,\n          ...flattenSchema(subSchema).properties,\n        }),\n        {},\n      ),\n    };\n\n    return combinedObject;\n  }\n  return schema;\n}\n","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/hooks/usePrompt.tsx",["330"],"import React, {\n  FunctionComponent,\n  useCallback,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\n\nfunction usePrompt<\n  S,\n  T extends { isOpen: boolean; onDismiss?: (data?: S) => void },\n  U extends FunctionComponent<T>\n>(\n  Component: U,\n): [\n  () => Promise<S | undefined>,\n  FunctionComponent<Omit<T, 'onDismiss' | 'isOpen'>>,\n] {\n  const [isOpen, setIsOpen] = useState<boolean>(false);\n\n  const promiseRef = useRef<{\n    resolve: (data?: S) => void;\n    reject: (data?: S) => void;\n  }>();\n\n  const openPrompt = useCallback((): Promise<S | undefined> => {\n    if (isOpen) {\n      throw new Error('Prompt already open');\n    }\n\n    setIsOpen(true);\n    return new Promise<S | undefined>((resolve, reject) => {\n      promiseRef.current = { resolve, reject };\n    });\n  }, [isOpen]);\n\n  const callback = useCallback((data: S) => {\n    setIsOpen(false);\n    promiseRef.current?.resolve(data);\n  }, []);\n\n  const WrappedComponent = useMemo(() => {\n    return (props: Omit<T, 'isOpen' | 'onDismiss'>) => {\n      const newProps = {\n        ...props,\n        onDismiss: callback,\n        isOpen,\n      };\n\n      // eslint-disable-next-line react/jsx-props-no-spreading\n      return <Component {...(newProps as any)} />;\n    };\n  }, [Component, isOpen, callback]);\n\n  // const prompt = useMemo(() => {\n  //   if (isOpen) {\n  //     return null;\n  //   }\n\n  //   return wrapper(<Component callback={promiseRef.current?.resolve} />);\n  // }, [Component, isOpen]);\n\n  return useMemo(() => [openPrompt, WrappedComponent], [\n    openPrompt,\n    WrappedComponent,\n  ]);\n}\n\nexport default usePrompt;\n","/Users/dev/Documents/InES/CKDAC/Frontend_v2/src/utils/helpers/mappingHelpers.ts",[],{"ruleId":"331","replacedBy":"332"},{"ruleId":"333","replacedBy":"334"},{"ruleId":"335","replacedBy":"336"},{"ruleId":"337","replacedBy":"338"},{"ruleId":"339","replacedBy":"340"},{"ruleId":"341","replacedBy":"342"},{"ruleId":"343","severity":1,"message":"344","line":47,"column":7,"nodeType":"345","messageId":"346","endLine":47,"endColumn":18},{"ruleId":"347","severity":1,"message":"348","line":7,"column":13,"nodeType":"349","messageId":"350","endLine":7,"endColumn":16,"suggestions":"351"},{"ruleId":"352","severity":1,"message":"353","line":6,"column":10,"nodeType":"354","messageId":"355","endLine":6,"endColumn":17},{"ruleId":"343","severity":1,"message":"344","line":30,"column":5,"nodeType":"345","messageId":"346","endLine":30,"endColumn":16},{"ruleId":"343","severity":1,"message":"344","line":39,"column":5,"nodeType":"345","messageId":"346","endLine":39,"endColumn":16},{"ruleId":"343","severity":1,"message":"344","line":48,"column":5,"nodeType":"345","messageId":"346","endLine":48,"endColumn":16},{"ruleId":"343","severity":1,"message":"344","line":91,"column":5,"nodeType":"345","messageId":"346","endLine":91,"endColumn":16},{"ruleId":"343","severity":1,"message":"344","line":46,"column":7,"nodeType":"345","messageId":"346","endLine":46,"endColumn":18},{"ruleId":"347","severity":1,"message":"348","line":39,"column":65,"nodeType":"349","messageId":"350","endLine":39,"endColumn":68,"suggestions":"356"},{"ruleId":"352","severity":1,"message":"357","line":2,"column":10,"nodeType":"354","messageId":"355","endLine":2,"endColumn":19},{"ruleId":"352","severity":1,"message":"358","line":4,"column":10,"nodeType":"354","messageId":"355","endLine":4,"endColumn":18},{"ruleId":"343","severity":1,"message":"344","line":69,"column":7,"nodeType":"345","messageId":"346","endLine":69,"endColumn":18},{"ruleId":"359","severity":1,"message":"360","line":55,"column":41,"nodeType":"361","messageId":"362","endLine":55,"endColumn":49},{"ruleId":"343","severity":1,"message":"344","line":63,"column":7,"nodeType":"345","messageId":"346","endLine":63,"endColumn":18},{"ruleId":"343","severity":1,"message":"344","line":79,"column":9,"nodeType":"345","messageId":"346","endLine":79,"endColumn":20},{"ruleId":"343","severity":1,"message":"344","line":118,"column":9,"nodeType":"345","messageId":"346","endLine":118,"endColumn":20},{"ruleId":"343","severity":1,"message":"344","line":150,"column":7,"nodeType":"345","messageId":"346","endLine":150,"endColumn":18},{"ruleId":"347","severity":1,"message":"348","line":7,"column":10,"nodeType":"349","messageId":"350","endLine":7,"endColumn":13,"suggestions":"363"},{"ruleId":"347","severity":1,"message":"348","line":8,"column":21,"nodeType":"349","messageId":"350","endLine":8,"endColumn":24,"suggestions":"364"},{"ruleId":"347","severity":1,"message":"348","line":13,"column":28,"nodeType":"349","messageId":"350","endLine":13,"endColumn":31,"suggestions":"365"},{"ruleId":"366","severity":1,"message":"367","line":9,"column":3,"nodeType":"354","messageId":"368","endLine":9,"endColumn":14},{"ruleId":"347","severity":1,"message":"348","line":9,"column":11,"nodeType":"349","messageId":"350","endLine":9,"endColumn":14,"suggestions":"369"},{"ruleId":"347","severity":1,"message":"348","line":203,"column":51,"nodeType":"349","messageId":"350","endLine":203,"endColumn":54,"suggestions":"370"},{"ruleId":"347","severity":1,"message":"348","line":232,"column":51,"nodeType":"349","messageId":"350","endLine":232,"endColumn":54,"suggestions":"371"},{"ruleId":"343","severity":1,"message":"344","line":332,"column":3,"nodeType":"345","messageId":"346","endLine":332,"endColumn":14},{"ruleId":"347","severity":1,"message":"348","line":375,"column":27,"nodeType":"349","messageId":"350","endLine":375,"endColumn":30,"suggestions":"372"},{"ruleId":"366","severity":1,"message":"373","line":1,"column":28,"nodeType":"354","messageId":"368","endLine":1,"endColumn":43},{"ruleId":"347","severity":1,"message":"348","line":1,"column":40,"nodeType":"349","messageId":"350","endLine":1,"endColumn":43,"suggestions":"374"},{"ruleId":"331","replacedBy":"375"},{"ruleId":"333","replacedBy":"376"},{"ruleId":"335","replacedBy":"377"},{"ruleId":"337","replacedBy":"378"},{"ruleId":"339","replacedBy":"379"},{"ruleId":"341","replacedBy":"380"},{"ruleId":"347","severity":1,"message":"348","line":35,"column":50,"nodeType":"349","messageId":"350","endLine":35,"endColumn":53,"suggestions":"381"},{"ruleId":"347","severity":1,"message":"348","line":39,"column":52,"nodeType":"349","messageId":"350","endLine":39,"endColumn":55,"suggestions":"382"},{"ruleId":"347","severity":1,"message":"348","line":55,"column":48,"nodeType":"349","messageId":"350","endLine":55,"endColumn":51,"suggestions":"383"},{"ruleId":"347","severity":1,"message":"348","line":59,"column":48,"nodeType":"349","messageId":"350","endLine":59,"endColumn":51,"suggestions":"384"},{"ruleId":"359","severity":1,"message":"360","line":69,"column":13,"nodeType":"361","messageId":"362","endLine":69,"endColumn":63},{"ruleId":"347","severity":1,"message":"348","line":86,"column":33,"nodeType":"349","messageId":"350","endLine":86,"endColumn":36,"suggestions":"385"},{"ruleId":"359","severity":1,"message":"360","line":149,"column":28,"nodeType":"361","messageId":"362","endLine":149,"endColumn":48},{"ruleId":"359","severity":1,"message":"360","line":154,"column":13,"nodeType":"361","messageId":"362","endLine":154,"endColumn":33},{"ruleId":"359","severity":1,"message":"360","line":164,"column":13,"nodeType":"361","messageId":"362","endLine":164,"endColumn":34},{"ruleId":"359","severity":1,"message":"360","line":164,"column":13,"nodeType":"361","messageId":"362","endLine":164,"endColumn":23,"suggestions":"386"},{"ruleId":"359","severity":1,"message":"360","line":183,"column":13,"nodeType":"361","messageId":"362","endLine":183,"endColumn":34},{"ruleId":"359","severity":1,"message":"360","line":183,"column":13,"nodeType":"361","messageId":"362","endLine":183,"endColumn":23,"suggestions":"387"},{"ruleId":"359","severity":1,"message":"360","line":249,"column":28,"nodeType":"361","messageId":"362","endLine":249,"endColumn":48},{"ruleId":"359","severity":1,"message":"360","line":256,"column":13,"nodeType":"361","messageId":"362","endLine":256,"endColumn":34},{"ruleId":"359","severity":1,"message":"360","line":256,"column":13,"nodeType":"361","messageId":"362","endLine":256,"endColumn":23,"suggestions":"388"},{"ruleId":"343","severity":1,"message":"344","line":439,"column":7,"nodeType":"345","messageId":"346","endLine":439,"endColumn":18},{"ruleId":"331","replacedBy":"389"},{"ruleId":"333","replacedBy":"334"},{"ruleId":"335","replacedBy":"336"},{"ruleId":"337","replacedBy":"338"},{"ruleId":"339","replacedBy":"340"},{"ruleId":"341","replacedBy":"342"},{"ruleId":"343","severity":1,"message":"344","line":72,"column":7,"nodeType":"345","messageId":"346","endLine":72,"endColumn":18},{"ruleId":"343","severity":1,"message":"344","line":348,"column":7,"nodeType":"345","messageId":"346","endLine":348,"endColumn":18},{"ruleId":"343","severity":1,"message":"344","line":388,"column":7,"nodeType":"345","messageId":"346","endLine":388,"endColumn":18},{"ruleId":"343","severity":1,"message":"344","line":532,"column":7,"nodeType":"345","messageId":"346","endLine":532,"endColumn":18},{"ruleId":"343","severity":1,"message":"344","line":97,"column":7,"nodeType":"345","messageId":"346","endLine":97,"endColumn":18},{"ruleId":"343","severity":1,"message":"344","line":308,"column":7,"nodeType":"345","messageId":"346","endLine":308,"endColumn":18},{"ruleId":"343","severity":1,"message":"344","line":351,"column":7,"nodeType":"345","messageId":"346","endLine":351,"endColumn":18},{"ruleId":"343","severity":1,"message":"344","line":509,"column":7,"nodeType":"345","messageId":"346","endLine":509,"endColumn":18},{"ruleId":"343","severity":1,"message":"344","line":150,"column":3,"nodeType":"345","messageId":"346","endLine":150,"endColumn":14},{"ruleId":"366","severity":1,"message":"390","line":7,"column":29,"nodeType":"354","messageId":"368","endLine":7,"endColumn":40},{"ruleId":"347","severity":1,"message":"348","line":7,"column":37,"nodeType":"349","messageId":"350","endLine":7,"endColumn":40,"suggestions":"391"},{"ruleId":"366","severity":1,"message":"390","line":25,"column":31,"nodeType":"354","messageId":"368","endLine":25,"endColumn":42},{"ruleId":"347","severity":1,"message":"348","line":25,"column":39,"nodeType":"349","messageId":"350","endLine":25,"endColumn":42,"suggestions":"392"},{"ruleId":"347","severity":1,"message":"348","line":25,"column":45,"nodeType":"349","messageId":"350","endLine":25,"endColumn":48,"suggestions":"393"},{"ruleId":"347","severity":1,"message":"348","line":30,"column":15,"nodeType":"349","messageId":"350","endLine":30,"endColumn":18,"suggestions":"394"},{"ruleId":"347","severity":1,"message":"348","line":30,"column":31,"nodeType":"349","messageId":"350","endLine":30,"endColumn":34,"suggestions":"395"},{"ruleId":"347","severity":1,"message":"348","line":51,"column":42,"nodeType":"349","messageId":"350","endLine":51,"endColumn":45,"suggestions":"396"},"jsx-a11y/accessible-emoji",[],"lines-around-directive",["397"],"global-require",[],"no-buffer-constructor",[],"no-new-require",[],"no-path-concat",[],"no-console","Unexpected console statement.","MemberExpression","unexpected","@typescript-eslint/no-explicit-any","Unexpected any. Specify a different type.","TSAnyKeyword","unexpectedAny",["398","399"],"@typescript-eslint/no-unused-vars","'getUser' is defined but never used.","Identifier","unusedVar",["400","401"],"'UserModel' is defined but never used.","'Redirect' is defined but never used.","@typescript-eslint/no-non-null-assertion","Forbidden non-null assertion.","TSNonNullExpression","noNonNull",["402","403"],["404","405"],["406","407"],"@typescript-eslint/explicit-module-boundary-types","Argument 'option' should be typed with a non-any type.","anyTypedArg",["408","409"],["410","411"],["412","413"],["414","415"],"Argument 'jsonObject' should be typed with a non-any type.",["416","417"],[],["397"],[],[],[],[],["418","419"],["420","421"],["422","423"],["424","425"],["426","427"],["428"],["429"],["430"],[],"Argument 'schema' should be typed with a non-any type.",["431","432"],["433","434"],["435","436"],["437","438"],["439","440"],["441","442"],"padding-line-between-statements",{"messageId":"443","fix":"444","desc":"445"},{"messageId":"446","fix":"447","desc":"448"},{"messageId":"443","fix":"449","desc":"445"},{"messageId":"446","fix":"450","desc":"448"},{"messageId":"443","fix":"451","desc":"445"},{"messageId":"446","fix":"452","desc":"448"},{"messageId":"443","fix":"453","desc":"445"},{"messageId":"446","fix":"454","desc":"448"},{"messageId":"443","fix":"455","desc":"445"},{"messageId":"446","fix":"456","desc":"448"},{"messageId":"443","fix":"457","desc":"445"},{"messageId":"446","fix":"458","desc":"448"},{"messageId":"443","fix":"459","desc":"445"},{"messageId":"446","fix":"460","desc":"448"},{"messageId":"443","fix":"461","desc":"445"},{"messageId":"446","fix":"462","desc":"448"},{"messageId":"443","fix":"463","desc":"445"},{"messageId":"446","fix":"464","desc":"448"},{"messageId":"443","fix":"465","desc":"445"},{"messageId":"446","fix":"466","desc":"448"},{"messageId":"443","fix":"467","desc":"445"},{"messageId":"446","fix":"468","desc":"448"},{"messageId":"443","fix":"469","desc":"445"},{"messageId":"446","fix":"470","desc":"448"},{"messageId":"443","fix":"471","desc":"445"},{"messageId":"446","fix":"472","desc":"448"},{"messageId":"443","fix":"473","desc":"445"},{"messageId":"446","fix":"474","desc":"448"},{"messageId":"443","fix":"475","desc":"445"},{"messageId":"446","fix":"476","desc":"448"},{"messageId":"477","fix":"478","desc":"479"},{"messageId":"477","fix":"480","desc":"479"},{"messageId":"477","fix":"481","desc":"479"},{"messageId":"443","fix":"482","desc":"445"},{"messageId":"446","fix":"483","desc":"448"},{"messageId":"443","fix":"484","desc":"445"},{"messageId":"446","fix":"485","desc":"448"},{"messageId":"443","fix":"486","desc":"445"},{"messageId":"446","fix":"487","desc":"448"},{"messageId":"443","fix":"488","desc":"445"},{"messageId":"446","fix":"489","desc":"448"},{"messageId":"443","fix":"490","desc":"445"},{"messageId":"446","fix":"491","desc":"448"},{"messageId":"443","fix":"492","desc":"445"},{"messageId":"446","fix":"493","desc":"448"},"suggestUnknown",{"range":"494","text":"495"},"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct.","suggestNever",{"range":"494","text":"496"},"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of.",{"range":"497","text":"495"},{"range":"497","text":"496"},{"range":"498","text":"495"},{"range":"498","text":"496"},{"range":"499","text":"495"},{"range":"499","text":"496"},{"range":"500","text":"495"},{"range":"500","text":"496"},{"range":"501","text":"495"},{"range":"501","text":"496"},{"range":"502","text":"495"},{"range":"502","text":"496"},{"range":"503","text":"495"},{"range":"503","text":"496"},{"range":"504","text":"495"},{"range":"504","text":"496"},{"range":"505","text":"495"},{"range":"505","text":"496"},{"range":"506","text":"495"},{"range":"506","text":"496"},{"range":"507","text":"495"},{"range":"507","text":"496"},{"range":"508","text":"495"},{"range":"508","text":"496"},{"range":"509","text":"495"},{"range":"509","text":"496"},{"range":"510","text":"495"},{"range":"510","text":"496"},"suggestOptionalChain",{"range":"511","text":"512"},"Consider using the optional chain operator `?.` instead. This operator includes runtime checks, so it is safer than the compile-only non-null assertion operator.",{"range":"513","text":"512"},{"range":"514","text":"512"},{"range":"515","text":"495"},{"range":"515","text":"496"},{"range":"516","text":"495"},{"range":"516","text":"496"},{"range":"517","text":"495"},{"range":"517","text":"496"},{"range":"518","text":"495"},{"range":"518","text":"496"},{"range":"519","text":"495"},{"range":"519","text":"496"},{"range":"520","text":"495"},{"range":"520","text":"496"},[246,249],"unknown","never",[1106,1109],[270,273],[295,298],[486,489],[151,154],[5341,5344],[6053,6056],[9533,9536],[39,42],[1096,1099],[1251,1254],[1715,1718],[1840,1843],[2700,2703],[4612,4613],"?",[5128,5129],[7222,7223],[122,125],[480,483],[486,489],[632,635],[648,651],[1211,1214]]